<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Onboarding example with LEARCredential using did:elsi</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Opengraph Facebook Meta Tags -->
    <meta property="og:title" content="Onboarding example with LEARCredential using did:elsi">
    <meta property="og:type" content="website">
    <meta property="og:description" content="A DID method for legal persons, maximising at the same time regulatory compliance, decentralisation and privacy for W3C Verifiable Credentials in the European Union.">
    <meta property="og:site_name" content="DID:ELSI Method">
    <meta property="og:url" content="https://alastria.github.io/did-method-elsi/">

    <script src="https://www.w3.org/Tools/respec/respec-w3c" async="" class="remove"></script>
    <script class="remove">
        var respecConfig = {
            latestVersion: "https://alastria.github.io/did-method-elsi/",
            github: "https://github.com/alastria/did-method-elsi",
            editors: [
                {
                    company: "JesusRuiz",
                    companyURL: "https://hesusruiz.github.io/hesusruiz",
                    email: "hesusruiz@gmail.com",
                    name: "Jesus Ruiz",
                },
            ],
            authors: [
                {
                    company: "JesusRuiz",
                    companyURL: "https://hesusruiz.github.io/hesusruiz",
                    email: "hesusruiz@gmail.com",
                    name: "Jesus Ruiz",
                },
            ],
            localBiblio: {
                "DEP-DSS": {
                        date: "2019-10",
                        href: "https://ec.europa.eu/digital-building-blocks/wikis/display/DIGITAL/Qualified+electronic+signature+-+QES+validation+algorithm",
                        publisher: "European Commission",
                        title: "Algorithm for Validation of qualified and advanced signatures and seals",
                },
                "DID-DNS": {
                        href: "https://tools.ietf.org/html/draft-mayrhofer-did-dns-01",
                        publisher: "IETF",
                        status: "Internet Draft",
                        title: "The Decentralized Identifier (DID) in the DNS",
                },
                "DID-PRIMER": {
                        href: "https://github.com/WebOfTrustInfo/rebooting-the-web-of-trust-fall2017/blob/master/topics-and-advance-readings/did-primer.md",
                        publisher: "Rebooting the Web of Trust 2017",
                        title: "DID Primer",
                },
                "ETSI-CERTOVERVIEW": {
                        date: "2020-07",
                        href: "https://www.etsi.org/deliver/etsi_en/319400_319499/31941201/01.04.02_20/en_31941201v010402a.pdf",
                        publisher: "ETSI",
                        title: "ETSI EN 319 412-1 V1.4.2 (2020-07) - Electronic Signatures and Infrastructures (ESI); Certificate Profiles; Part 1: Overview and common data structures",
                },
                "ETSI-JADES": {
                        date: "2021-03",
                        href: "https://www.etsi.org/deliver/etsi_ts/119100_119199/11918201/01.01.01_60/ts_11918201v010101p.pdf",
                        publisher: "ETSI",
                        title: "ETSI TS 119 182-1 V1.1.1 (2021-03) - Electronic Signatures and Infrastructures (ESI); JAdES digital signatures; Part 1: Building blocks and JAdES baseline signatures",
                },
                "ETSI-LEGALPERSON": {
                        date: "2020-07",
                        href: "https://www.etsi.org/deliver/etsi_en/319400_319499/31941203/01.02.01_60/en_31941203v010201p.pdf",
                        publisher: "ETSI",
                        title: "ETSI EN 319 412-3 V1.2.1 (2020-07) - Electronic Signatures and Infrastructures (ESI); Certificate Profiles; Part 3: Certificate profile for certificates issued to legal persons",
                },
                "OWASP-TRANSPORT": {
                        href: "https://www.owasp.org/index.php/Transport_Layer_Protection_Cheat_Sheet",
                        title: "Transport Layer Protection Cheatsheet",
                },
                "OpenID.SIOP2": {
                        date: "28 January 2022",
                        href: "https://openid.bitbucket.io/connect/openid-connect-self-issued-v2-1_0.html",
                        title: "Self-Issued OpenID Provider v2",
                },
                "OpenID.VCI": {
                        date: "3 February 2023",
                        href: "https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0.html",
                        title: "OpenID for Verifiable Credential Issuance",
                },
                "OpenID.VP": {
                        date: "21 April 2023",
                        href: "https://openid.net/specs/openid-4-verifiable-presentations-1_0.html",
                        title: "OpenID for Verifiable Presentations",
                },
                "RFC6749": {
                        href: "https://www.rfc-editor.org/rfc/rfc6749.html",
                        title: "The OAuth 2.0 Authorization Framework",
                },
                "RFC7515": {
                        href: "https://www.rfc-editor.org/rfc/rfc7515",
                        title: "JSON Web Signature (JWS)",
                },
                "RFC7519": {
                        href: "https://www.rfc-editor.org/rfc/rfc7519",
                        title: "JSON Web Token (JWT)",
                },
                "RFC8414": {
                        href: "https://www.rfc-editor.org/rfc/rfc8414",
                        title: "OAuth 2.0 Authorization Server Metadata",
                },
                "RFC8725": {
                        href: "https://www.rfc-editor.org/rfc/rfc8725",
                        title: "JSON Web Token Best Current Practices",
                },
            },
        };
    </script>
    <style>
        code {
            color: red;
        }
    </style>
</head>

<body>
    <p class="copyright">
        Copyright Â© 2023 the document editors/authors. Text is available under the <a rel="license" href="https://creativecommons.org/licenses/by/4.0/legalcode"> Creative Commons Attribution 4.0 International Public License</a>
    </p>



<section id='abstract'>
    <p>This is an example of an onboarding process performed with the LEARCredential using the `did:elsi` method.
    </p>
</section>


<section><h2>Participants</h2>

    <p>Here we introduce the actors of the reference use case we are going to have. The main actors are marked in yellow in the following diagram.
    </p>
    <p>RealTruth is a Trust Service Provider operating under the eIDAS Trust Framework, which issues a certificate for seals to the company GoodAir. GoodAir is a business that provides some services using an Air Quality application operated by GoodAir.
    </p>
    <p>RealTruth also provides a certificate for signatures to the COO of the GoodAir company, so the COO can use the certificate to sign documents on behalf of GoodAir (like contracts, invoices, financial reports, ...) in a way that is compliant with eIDAS.
    </p>
    <p>The COO of GoodAir will issue a verifiable credential of type LEARCredential to an employee of GoodAir, signing the credential with his certificate for signatures.
    </p>
<!-- Original D2 diagram definition
    classes: {
        participant: {
            style: {
                fill: "yellow"
            }
        }
    }
    eIDAS: eIDAS Trust Framework {
        DE_TL: Germany Trusted List {
            RealTruth: RealTruth TSP {
                Seal: Service\nCertificate\nfor seal
                Seal.shape: circle
                Sign: Service\ncertificate\nfor signature
                Sign.shape: circle
            }
            RealTruth.class: participant
            Other TSPs {
                S3.shape: circle
                S3: Cert\nfor Sign
                S4.shape: circle
                S4: Cert\nfor Seal
            }
        }
        DE_TL.style.fill: transparent
        SP_TL: Spain Trusted List {
            TSP1 {
                S1.shape: circle
                S1: Cert\nfor Sign
                S2.shape: circle
                S2: Cert\nfor Seal
            }
            TSP2 {
                S3.shape: circle
                S3: Cert\nfor Sign
                S4.shape: circle
                S4: Cert\nfor Seal
            }
        }
        SP_TL.style.fill: transparent
        Other countries {
        }
    }
    eIDAS.style.fill: transparent
    GoodAir {
        COO
        Employee
    }
    GoodAir.class: participant
    eIDAS.DE_TL.RealTruth.Seal -> GoodAir: Issue Cert for Seals
    eIDAS.DE_TL.RealTruth.Sign -> GoodAir.COO: Issue Cert for Signatures
    GoodAir.COO -> GoodAir.Employee: LEARCredential
 -->

<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" d2Version="v0.4.0-HEAD" preserveAspectRatio="xMinYMin meet" viewBox="0 0 2128 1128"><svg id="d2-svg" class="d2-3300851763" width="2128" height="1128" viewBox="-101 -100 2128 1128"><rect x="-101.000000" y="-100.000000" width="2128.000000" height="1128.000000" rx="0.000000" class=" fill-N7" stroke-width="0" /><style type="text/css"><![CDATA[
.d2-3300851763 .text {
	font-family: "d2-3300851763-font-regular";
}
@font-face {
	font-family: d2-3300851763-font-regular;
	src: url("data:application/font-woff;base64,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");
}
.d2-3300851763 .text-bold {
	font-family: "d2-3300851763-font-bold";
}
@font-face {
	font-family: d2-3300851763-font-bold;
	src: url("data:application/font-woff;base64,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");
}
.d2-3300851763 .text-italic {
	font-family: "d2-3300851763-font-italic";
}
@font-face {
	font-family: d2-3300851763-font-italic;
	src: url("data:application/font-woff;base64,d09GRgABAAAAAA90AAoAAAAAF/wAARhRAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAAA9AAAAGAAAABgW1SVeGNtYXAAAAFUAAAAqAAAANgD6QTZZ2x5ZgAAAfwAAAjAAAAMVKtCltdoZWFkAAAKvAAAADYAAAA2G7Ur2mhoZWEAAAr0AAAAJAAAACQLeAjMaG10eAAACxgAAACgAAAAoEiNBOtsb2NhAAALuAAAAFIAAABSPxA79m1heHAAAAwMAAAAIAAAACAAQAD2bmFtZQAADCwAAAMmAAAIMgntVzNwb3N0AAAPVAAAACAAAAAg/8YAMgADAeEBkAAFAAACigJY//EASwKKAlgARAFeADIBIwAAAgsFAwMEAwkCBCAAAHcAAAADAAAAAAAAAABBREJPAAEAIP//Au7/BgAAA9gBESAAAZMAAAAAAeYClAAAACAAA3icdM3JScQAGEDhLybuUeO+RY1bAdpB8CCCoIgNBE/iRbyIJbkWoMjMlDI1TAH/MLnPu36Hh0QqQS7zjlIhlaucq126cu3WvcajZ6/eIlA5U7to9cadxoMnLyONfgyiF93oxH/8xW/8xHd8xWd8tJ/xJU6cmpDKTJoybcasOfNyCxYtKSxbsWrNug2btmzbsau0Z9+ByqEjxwwBAAD//wEAAP//N/ImrXicfFZtbFvV+X/OuTf3NomdxL5+qZ3Eju+5vjdx/BZf2zeOYyeO8+IkdtokdQi0SZPSlLZ//l2gpJS1HdBKjLHBzFRt2lSJSdMmJr4V9oEvIDGkRWOdNgk2pr1IoxAQHYJGUQVouZ7udV6cSNuXqyP7nOd5fr/n9/zOgRoQAPA5fB0oqIVGMIMVQOY8FCUrCrFTsiQRllUkjmOFq2j16k/o7AMftf/0K7+bHnn6l+P/WngFX998GD019+ST6tFnl5buu3NH9aE/3QEAwOV3ANB7uAS1YALgWFkSRYkwDEIyRyTC3u75dR1dR9NOWf0dOvlAftL8yRn0xPJy9Gx34iF1Epc2l2/dAkCQKG/gAL4BboAaXhRj0TSWIzY7K4qEb8BWi80mR+KKnWEQP346Hn7gSr578mCci4s9xwcEfizZnm0jwpwhe3GicP3xEcXX0SalTl7sTc7F2poj7oBWKxAAHNdr5TQG5IjNamEYIsmReDwWFQkh1775neeLL31jZqZ4OfvQg3Fc+vYTj7+21H/kh4tzZzS8SI/RhEtQr3PIeliZJayHJdfQWaN623e34XMZiQ24lHlv4N5A1f7aqv3U1u7AXeMXvbiU+XBA/fM2B0l8A3idg/9CgUIUmWIY5L9wJXz06cnkpEPhlPb0iSGB5PuEBOd91vj7hDBvePHixPXHh3eI6JmPH2z6Vb/6ocu7jQM2cAkonQmKXJu4pjVj+z/0A1yCmsp/GrqJC8hixKXNmwOAobe8gefxDWiCtupKbVZLA5YiaaxxWakYuc+tBGdWhseWosGZx7Kx+9L82IT2HTX86PJ4aWVo8NL0+IsrQ9neEyuJxZXkiZWehQs7vQroPFuqe0UoTo5sN+v1Y4+OPX3kTDRzfOlsPreES2Mzhx/qUr9EI4cPJWTYiSPhEhjBthuH5Qi1J9Jrxx45N31++uFHlcEH50+O5xZwaXj66DmTehvZ1E9RcWo4Hqr031DeQCq+AT4AOy9Kit6UWFSUJE208fhOxxjGarHZ7Ta97o+zy+2J1qLSOxnw5n3J2LFkcsEtO4aD3lhrl5APRZOnDD09nZ2RwW4hYgs6R5XIVCTaHnR1uMPNYsgWaBlReo5GAcEcAI7hErAaGqJ4WEL9YuUNI3rH+OYKLmSzm69WcEvlDfQlWgeLxoB9V02yIlNEIQwjaVrakdar/Xn/2LwspUw0l17sO0CTWbN4SPBbIy1CNubuMhwtDj9xTG73pFRnzhvqD4b+IvK+0blIX6rCi7e8gW6idWjZk22Xia3pff/QSX9hMebvtQU4sTU8E0/0tMVtvLNgODU3eL4Y4h1hu3VwOTsw7DRFLN4dLFjCq2DVnGwPlv8NpsdMNYmF0haaCe9+NFLb8Tc2u/fDwTqWN9E6OMFbnU9XjofZcSJK1m1DQ/jhzJnA+LGwknEZatS3a9uyvtaE3dU6+eMypswdJDZvOLs4tDzlDx6OtMgNfYe9DpNsdSNv/UFjS5e7CAg6AdDz+F2w633tw9VKYnXT6Cz21WeaGidSTp+5ua7Z5Ok4YDpheLCIXk7UTI5NG+sVti7SOZ1WZzXOUFlA62gd3BCsVqqiMAzZqwaGofaw90rXDBFahtrTYw0O8Ugodbhz9FiXmDZRXN8p7nyCTPKdtq4WkpFdob+JrTE7n+8/LfpnitnH7o9o+qCOn0KeTt8fRL5jeDacTFb04QZA7+NVcOhTyLKyDtBqYSnCaTRqMCn3C4VwE90x5U/HDqTzvTSda8kFh/DqnRQJZbrdgvpb5LccNI77gurL5bIWE77GN7EIIgAwIOV2c32GV8FQ8S8tH0cklnW/UFjAX82+tTIxt+zEq2orQu+oH3326CVA4C9vwNd4FcwaW7GowmnEWC1brf7/DHOpcAUhE8WwqM5m6DM58P9tvsjWUmaEkzS9kxd/itY1b9ByViDat4Aye5BWg17sY2lxWuzpqgnNelNxmk4XUjQ9Ys35hzQOhm25ziG0Nip0Ke1+OdNtclmqedhd7fKM1uFgdQ37adYydkwF97CsZ9hP8q6X/BWtQyO0Vs9Dxe4rV2dlyN89NO8fm48cOu4fn/cFJuV4RPsYTh8dOl8MVr79A8uDAyPZ5cGBYf39cK8soy/QemW22aqKGzDhRe1lwm3fKAzL2mx1z/UxlLcY1Ec8IvZy2Oz+uZCNucId/CQJWuRb+NV+d2BrwN2nX0LINzonp1M+8ROvZ1cfl9E6NFVxZGfFbW7q6dZ8wGFtbnIKeXcKrc35U7WDB/qS6i1A5X+XN9AVtA7Sfv/fb/+a+1fM/2ddc46wvV/0pTq6gwn/qD841hLkZI/YFW9LR8NThmi76G4PEqfkdqY7OjNewdVucQbcLtHM9/oDg16t5t7yBprFD+/4a1zRXELWnaHKX1/vj9IoMVKfFzLNlwxXElQL3+CsNzWFDH2BRqcRmRM1zzyTVj81m12uuhqFbdRid5c30OdoTZvN7di76ue2LPaVHWXmWkf8Q3ntkmg/YhhQTG4OxdV3OYcmGTSrOseIXOE5CYD+idbACKBNoc1ml+NaQHR1JC/QDE2bBO77BXUTrakfk3EijArIoTorZ4cB8G/QGnj2nd1dUYSqvDVZ6gzJNyGE6MbmpqfGTRgjusHZ9GTu78cb9F9bGy+gNfUDfpDnB3nkqlo5UR3JCUKOqPcAld8qh9BttAZOAFbvrW6YeypvwExdW4PDbPZmHObpvFhzgKJNXvP38uoHjmTujyybqE1FCPpY/dxTICTPI9Pm3VDBX8HkBEBP4W/pb0dFu73jikzJrNP43YVH6opK8rGrhn70j4iB33yrHwCV7wGgt/Fz2jmipKmtIZB2BoT1sHUHFl6YD8mxtgwv+e8LT836pi5PI4shOHnpxP1Bf6/HHRY77h+MzS8s5wa2tA+30Nr2u8+9WDiB1nTSEYzgcbiJb2r1cboOKsZ1kXMRu6WV4HG7zeE5aHO0/QcAAP//AQAA///qKI2NAAEAAAABGFEfHCK1Xw889QABA+gAAAAA2F2gzAAAAADdZi83/r3+3QgdA8kAAgADAAIAAAAAAAAAAQAAA9j+7wAACED+vf28CB0D6ADC/9EAAAAAAAAAAAAAACgCdAAkAMgAAAH+/8sCJgA5AlAAIwH3ACMB2QAjAkwAOQD8ACMBzgAjAnkAPAImACMCKwAjAfoADAH+AF0CGQAnAbMAJQIXACcB4QAlARoAKwITAAECCwAfAO0AHwHcAB8A+AAsAx8AHwINAB8CAwAnAhf/9gFWAB8Bkv/8AUUAPAIQADgBwAA7AsMARgHA/8IB4AAaAeD/9gDtAB8AAABHAAAALgAuAFIAhACmAL4A1AEKARgBKAFaAX4BpgHmAfoCMgJgApgC0gL6A0IDbAN4A5IDtAP2BCAETgSIBKYE4gUQBTwFWgWUBcQF3AYGBhQGKgAAAAEAAAAoAIwADABmAAcAAQAAAAAAAAAAAAAAAAAEAAN4nJyU204bVxSGPwfbbXq6qFBEbtC+TKVkTKMQJeHKlKCMinDqcXqQqkqDPT6I8czIM5iSJ+h136Jvkas+Rp+i6nW1fy+DHUVBIAT8e/Y6/Gutf21gk//YoFa/C/zdnBuusd382fAdvmgeGd5gv/mZ4ToPG/8YbjBovDXc5EGja/gT3tX/NPwpT+q/Gb7LVv3Q8Oc8rm8a/nLD8a/hr3jCuwWuwTP+MFxji8LwHTb51fAG97CYtTr32DHc4Gu2DTfZBnpMqEiZkDHCMWTCiDNmJJREJMyYMCRhgCOkTUqlrxmxkGP0wa8xERUzYkUcU+FIiUiJKRlbxLfyynmtjEOdZnbXpmJMzIk8TonJcOSMyMlIOFWcioqCF7RoUdIX34KKkoCSCSkBOTNGtOhwyBE9xkwocRwqkmcWkTOk4pxY+Z1Z+M70ScgojdUZGQPxdOKXyDvkCEeHQrarkY/WIjzE8aO8Pbdctt8S6NetMFvPu2QTM1c/U3Ul1c25JjjWrc/b5gfhihe4W/Vnncn1PRrof6XIJ5xp/gNNKhOTDOe2aBNJQZG7j2Nf55BIHfmJkB6v6PCGns5tunRpc0yPkJfy7dDF8R0djjmQRyi8uDuUYo75Bcf3hLLxsRPrz2JiCb9TmLpLcZypjimFeu6ZB6o1UYU3n7DfoXxNHaV8+tojb+k0v0x7FjMyVRRiOFUvl9oorX8DU8RUtfjZXt37bZjb7i23+IJcO+zVuuDkJ7dgdN1Ug/c0c66fgJgBOSey6JMzpUXFhXi/JuaMFMeBuvdKW1LRvvTxeS6kkoSpGIRkijOj0N/YdBMZ9/6a7p29JQP5e6anl1XdJotTr65m9EbdW95F1uVkZQItm2q+oqa+uGam/UQ7tco/km+p1y3nEaHiLnb7Q6/ADs/ZZY+xsvR1M7+886+Et9hTB05JZDWUpn0NjwnYJeApu+zynKfv9XLJxhkft8ZnNX+bA/bpsHdtNQvbDvu8XIv28cx/ie2O6nE8ujw9u/U0H9xAtd9o367eza4m56cxt2hX23FMzNRzcVurNbn7BP8DAAD//wEAAP//cqFRQAAAAAMAAP/1AAD/zgAyAAAAAAAAAAAAAAAAAAAAAAAAAAA=");
}]]></style><style type="text/css"><![CDATA[.shape {
  shape-rendering: geometricPrecision;
  stroke-linejoin: round;
}
.connection {
  stroke-linecap: round;
  stroke-linejoin: round;
}
.blend {
  mix-blend-mode: multiply;
  opacity: 0.5;
}

		.d2-3300851763 .fill-N1{fill:#0A0F25;}
		.d2-3300851763 .fill-N2{fill:#676C7E;}
		.d2-3300851763 .fill-N3{fill:#9499AB;}
		.d2-3300851763 .fill-N4{fill:#CFD2DD;}
		.d2-3300851763 .fill-N5{fill:#DEE1EB;}
		.d2-3300851763 .fill-N6{fill:#EEF1F8;}
		.d2-3300851763 .fill-N7{fill:#FFFFFF;}
		.d2-3300851763 .fill-B1{fill:#0D32B2;}
		.d2-3300851763 .fill-B2{fill:#0D32B2;}
		.d2-3300851763 .fill-B3{fill:#E3E9FD;}
		.d2-3300851763 .fill-B4{fill:#E3E9FD;}
		.d2-3300851763 .fill-B5{fill:#EDF0FD;}
		.d2-3300851763 .fill-B6{fill:#F7F8FE;}
		.d2-3300851763 .fill-AA2{fill:#4A6FF3;}
		.d2-3300851763 .fill-AA4{fill:#EDF0FD;}
		.d2-3300851763 .fill-AA5{fill:#F7F8FE;}
		.d2-3300851763 .fill-AB4{fill:#EDF0FD;}
		.d2-3300851763 .fill-AB5{fill:#F7F8FE;}
		.d2-3300851763 .stroke-N1{stroke:#0A0F25;}
		.d2-3300851763 .stroke-N2{stroke:#676C7E;}
		.d2-3300851763 .stroke-N3{stroke:#9499AB;}
		.d2-3300851763 .stroke-N4{stroke:#CFD2DD;}
		.d2-3300851763 .stroke-N5{stroke:#DEE1EB;}
		.d2-3300851763 .stroke-N6{stroke:#EEF1F8;}
		.d2-3300851763 .stroke-N7{stroke:#FFFFFF;}
		.d2-3300851763 .stroke-B1{stroke:#0D32B2;}
		.d2-3300851763 .stroke-B2{stroke:#0D32B2;}
		.d2-3300851763 .stroke-B3{stroke:#E3E9FD;}
		.d2-3300851763 .stroke-B4{stroke:#E3E9FD;}
		.d2-3300851763 .stroke-B5{stroke:#EDF0FD;}
		.d2-3300851763 .stroke-B6{stroke:#F7F8FE;}
		.d2-3300851763 .stroke-AA2{stroke:#4A6FF3;}
		.d2-3300851763 .stroke-AA4{stroke:#EDF0FD;}
		.d2-3300851763 .stroke-AA5{stroke:#F7F8FE;}
		.d2-3300851763 .stroke-AB4{stroke:#EDF0FD;}
		.d2-3300851763 .stroke-AB5{stroke:#F7F8FE;}
		.d2-3300851763 .background-color-N1{background-color:#0A0F25;}
		.d2-3300851763 .background-color-N2{background-color:#676C7E;}
		.d2-3300851763 .background-color-N3{background-color:#9499AB;}
		.d2-3300851763 .background-color-N4{background-color:#CFD2DD;}
		.d2-3300851763 .background-color-N5{background-color:#DEE1EB;}
		.d2-3300851763 .background-color-N6{background-color:#EEF1F8;}
		.d2-3300851763 .background-color-N7{background-color:#FFFFFF;}
		.d2-3300851763 .background-color-B1{background-color:#0D32B2;}
		.d2-3300851763 .background-color-B2{background-color:#0D32B2;}
		.d2-3300851763 .background-color-B3{background-color:#E3E9FD;}
		.d2-3300851763 .background-color-B4{background-color:#E3E9FD;}
		.d2-3300851763 .background-color-B5{background-color:#EDF0FD;}
		.d2-3300851763 .background-color-B6{background-color:#F7F8FE;}
		.d2-3300851763 .background-color-AA2{background-color:#4A6FF3;}
		.d2-3300851763 .background-color-AA4{background-color:#EDF0FD;}
		.d2-3300851763 .background-color-AA5{background-color:#F7F8FE;}
		.d2-3300851763 .background-color-AB4{background-color:#EDF0FD;}
		.d2-3300851763 .background-color-AB5{background-color:#F7F8FE;}
		.d2-3300851763 .color-N1{color:#0A0F25;}
		.d2-3300851763 .color-N2{color:#676C7E;}
		.d2-3300851763 .color-N3{color:#9499AB;}
		.d2-3300851763 .color-N4{color:#CFD2DD;}
		.d2-3300851763 .color-N5{color:#DEE1EB;}
		.d2-3300851763 .color-N6{color:#EEF1F8;}
		.d2-3300851763 .color-N7{color:#FFFFFF;}
		.d2-3300851763 .color-B1{color:#0D32B2;}
		.d2-3300851763 .color-B2{color:#0D32B2;}
		.d2-3300851763 .color-B3{color:#E3E9FD;}
		.d2-3300851763 .color-B4{color:#E3E9FD;}
		.d2-3300851763 .color-B5{color:#EDF0FD;}
		.d2-3300851763 .color-B6{color:#F7F8FE;}
		.d2-3300851763 .color-AA2{color:#4A6FF3;}
		.d2-3300851763 .color-AA4{color:#EDF0FD;}
		.d2-3300851763 .color-AA5{color:#F7F8FE;}
		.d2-3300851763 .color-AB4{color:#EDF0FD;}
		.d2-3300851763 .color-AB5{color:#F7F8FE;}.appendix text.text{fill:#0A0F25}.md{--color-fg-default:#0A0F25;--color-fg-muted:#676C7E;--color-fg-subtle:#9499AB;--color-canvas-default:#FFFFFF;--color-canvas-subtle:#EEF1F8;--color-border-default:#0D32B2;--color-border-muted:#0D32B2;--color-neutral-muted:#EEF1F8;--color-accent-fg:#0D32B2;--color-accent-emphasis:#0D32B2;--color-attention-subtle:#676C7E;--color-danger-fg:red;}.sketch-overlay-B1{fill:url(#streaks-darker);mix-blend-mode:lighten}.sketch-overlay-B2{fill:url(#streaks-darker);mix-blend-mode:lighten}.sketch-overlay-B3{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-B4{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-B5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-B6{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AA2{fill:url(#streaks-dark);mix-blend-mode:overlay}.sketch-overlay-AA4{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AA5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AB4{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AB5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-N1{fill:url(#streaks-darker);mix-blend-mode:lighten}.sketch-overlay-N2{fill:url(#streaks-dark);mix-blend-mode:overlay}.sketch-overlay-N3{fill:url(#streaks-normal);mix-blend-mode:color-burn}.sketch-overlay-N4{fill:url(#streaks-normal);mix-blend-mode:color-burn}.sketch-overlay-N5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-N6{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-N7{fill:url(#streaks-bright);mix-blend-mode:darken}.light-code{display: block}.dark-code{display: none}]]></style><g id="eIDAS"><g class="shape" ><rect x="0.000000" y="41.000000" width="1926.000000" height="412.000000" fill="transparent" class=" stroke-B1" style="stroke-width:2;" /></g><text x="963.000000" y="28.000000" class="text fill-N1" style="text-anchor:middle;font-size:28px">eIDAS Trust Framework</text></g><g id="GoodAir" class="participant"><g class="shape" ><rect x="81.000000" y="615.000000" width="333.000000" height="312.000000" fill="yellow" class=" stroke-B1" style="stroke-width:2;" /></g><text x="247.500000" y="602.000000" class="text fill-N1" style="text-anchor:middle;font-size:28px">GoodAir</text></g><g id="eIDAS.DE_TL"><g class="shape" ><rect x="20.000000" y="106.000000" width="858.000000" height="317.000000" fill="transparent" class=" stroke-B1" style="stroke-width:2;" /></g><text x="449.000000" y="94.000000" class="text fill-N1" style="text-anchor:middle;font-size:24px">Germany Trusted List</text></g><g id="eIDAS.SP_TL"><g class="shape" ><rect x="1114.000000" y="106.000000" width="792.000000" height="317.000000" fill="transparent" class=" stroke-B1" style="stroke-width:2;" /></g><text x="1510.000000" y="94.000000" class="text fill-N1" style="text-anchor:middle;font-size:24px">Spain Trusted List</text></g><g id="eIDAS.Other countries"><g class="shape" ><rect x="918.000000" y="214.000000" width="156.000000" height="66.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><text x="996.000000" y="252.500000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">Other countries</text></g><g id="GoodAir.COO"><g class="shape" ><rect x="214.000000" y="644.000000" width="77.000000" height="66.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><text x="252.500000" y="682.500000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">COO</text></g><g id="GoodAir.Employee"><g class="shape" ><rect x="196.000000" y="831.000000" width="114.000000" height="66.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><text x="253.000000" y="869.500000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">Employee</text></g><g id="eIDAS.DE_TL.RealTruth" class="participant"><g class="shape" ><rect x="40.000000" y="169.000000" width="432.000000" height="222.000000" fill="yellow" class=" stroke-B1" style="stroke-width:2;" /></g><text x="256.000000" y="158.000000" class="text fill-N1" style="text-anchor:middle;font-size:20px">RealTruth TSP</text></g><g id="eIDAS.DE_TL.Other TSPs"><g class="shape" ><rect x="492.000000" y="169.000000" width="366.000000" height="222.000000" class=" stroke-B1 fill-B6" style="stroke-width:2;" /></g><text x="675.000000" y="158.000000" class="text fill-N1" style="text-anchor:middle;font-size:20px">Other TSPs</text></g><g id="eIDAS.SP_TL.TSP1"><g class="shape" ><rect x="1134.000000" y="169.000000" width="366.000000" height="222.000000" class=" stroke-B1 fill-B6" style="stroke-width:2;" /></g><text x="1317.000000" y="158.000000" class="text fill-N1" style="text-anchor:middle;font-size:20px">TSP1</text></g><g id="eIDAS.SP_TL.TSP2"><g class="shape" ><rect x="1520.000000" y="169.000000" width="366.000000" height="222.000000" class=" stroke-B1 fill-B6" style="stroke-width:2;" /></g><text x="1703.000000" y="158.000000" class="text fill-N1" style="text-anchor:middle;font-size:20px">TSP2</text></g><g id="eIDAS.DE_TL.RealTruth.Seal"><g class="shape" ><ellipse rx="69.500000" ry="69.500000" cx="149.500000" cy="280.500000" class="shape stroke-B1 fill-N7" style="stroke-width:2;" /></g><text x="149.500000" y="270.000000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px"><tspan x="149.500000" dy="0.000000">Service</tspan><tspan x="149.500000" dy="17.666667">Certificate</tspan><tspan x="149.500000" dy="17.666667">for seal</tspan></text></g><g id="eIDAS.DE_TL.RealTruth.Sign"><g class="shape" ><ellipse rx="76.500000" ry="76.500000" cx="355.500000" cy="280.500000" class="shape stroke-B1 fill-N7" style="stroke-width:2;" /></g><text x="355.500000" y="270.000000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px"><tspan x="355.500000" dy="0.000000">Service</tspan><tspan x="355.500000" dy="17.666667">certificate</tspan><tspan x="355.500000" dy="17.666667">for signature</tspan></text></g><g id="eIDAS.DE_TL.Other TSPs.S3"><g class="shape" ><ellipse rx="56.500000" ry="56.500000" cx="588.500000" cy="280.500000" class="shape stroke-B1 fill-N7" style="stroke-width:2;" /></g><text x="588.500000" y="278.000000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px"><tspan x="588.500000" dy="0.000000">Cert</tspan><tspan x="588.500000" dy="18.500000">for Sign</tspan></text></g><g id="eIDAS.DE_TL.Other TSPs.S4"><g class="shape" ><ellipse rx="56.500000" ry="56.500000" cx="761.500000" cy="280.500000" class="shape stroke-B1 fill-N7" style="stroke-width:2;" /></g><text x="761.500000" y="278.000000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px"><tspan x="761.500000" dy="0.000000">Cert</tspan><tspan x="761.500000" dy="18.500000">for Seal</tspan></text></g><g id="eIDAS.SP_TL.TSP1.S1"><g class="shape" ><ellipse rx="56.500000" ry="56.500000" cx="1230.500000" cy="280.500000" class="shape stroke-B1 fill-N7" style="stroke-width:2;" /></g><text x="1230.500000" y="278.000000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px"><tspan x="1230.500000" dy="0.000000">Cert</tspan><tspan x="1230.500000" dy="18.500000">for Sign</tspan></text></g><g id="eIDAS.SP_TL.TSP1.S2"><g class="shape" ><ellipse rx="56.500000" ry="56.500000" cx="1403.500000" cy="280.500000" class="shape stroke-B1 fill-N7" style="stroke-width:2;" /></g><text x="1403.500000" y="278.000000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px"><tspan x="1403.500000" dy="0.000000">Cert</tspan><tspan x="1403.500000" dy="18.500000">for Seal</tspan></text></g><g id="eIDAS.SP_TL.TSP2.S3"><g class="shape" ><ellipse rx="56.500000" ry="56.500000" cx="1616.500000" cy="280.500000" class="shape stroke-B1 fill-N7" style="stroke-width:2;" /></g><text x="1616.500000" y="278.000000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px"><tspan x="1616.500000" dy="0.000000">Cert</tspan><tspan x="1616.500000" dy="18.500000">for Sign</tspan></text></g><g id="eIDAS.SP_TL.TSP2.S4"><g class="shape" ><ellipse rx="56.500000" ry="56.500000" cx="1789.500000" cy="280.500000" class="shape stroke-B1 fill-N7" style="stroke-width:2;" /></g><text x="1789.500000" y="278.000000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px"><tspan x="1789.500000" dy="0.000000">Cert</tspan><tspan x="1789.500000" dy="18.500000">for Seal</tspan></text></g><g id="(eIDAS.DE_TL.RealTruth.Seal -&gt; GoodAir)[0]"><marker id="mk-3488378134" markerWidth="10.000000" markerHeight="12.000000" refX="7.000000" refY="6.000000" viewBox="0.000000 0.000000 10.000000 12.000000" orient="auto" markerUnits="userSpaceOnUse"> <polygon points="0.000000,0.000000 10.000000,6.000000 0.000000,12.000000" class="connection fill-B1" stroke-width="2" /> </marker><path d="M 149.671202 351.972788 C 149.600000 352.400000 149.500000 363.000000 149.500000 378.000000 C 149.500000 393.000000 149.500000 413.000000 149.500000 428.000000 C 149.500000 443.000000 149.500000 533.900000 149.500000 611.500000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-3300851763)" /><text x="150.000000" y="488.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">Issue Cert for Seals</text></g><g id="(eIDAS.DE_TL.RealTruth.Sign -&gt; GoodAir.COO)[0]"><path d="M 355.751931 355.015444 C 355.600000 353.800000 355.500000 363.000000 355.500000 378.000000 C 355.500000 393.000000 355.500000 413.000000 355.500000 428.000000 C 355.500000 443.000000 355.500000 465.100000 355.500000 483.250000 C 355.500000 501.400000 342.500000 588.500000 293.170180 643.521722" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-3300851763)" /><text x="354.000000" y="514.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">Issue Cert for Signatures</text></g><g id="GoodAir.(COO -&gt; Employee)[0]"><path d="M 252.500000 712.500000 C 252.500000 758.900000 252.500000 783.200000 252.500000 828.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-3300851763)" /><text x="252.500000" y="777.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">LEARCredential</text></g><mask id="d2-3300851763" maskUnits="userSpaceOnUse" x="-101" y="-100" width="2128" height="1128">
<rect x="-101" y="-100" width="2128" height="1128" fill="white"></rect>
<rect x="88.000000" y="472.000000" width="124" height="21" fill="black"></rect>
<rect x="274.000000" y="498.000000" width="160" height="21" fill="black"></rect>
<rect x="202.000000" y="761.000000" width="101" height="21" fill="black"></rect>
</mask></svg></svg>

    <section><h2>DOME: an instance of a Data Space for Smart Cities</h2>

        <p>DOME is a Data Space where local governments can procure data and services from other entities that act as service providers. At the same time, the local governments can also act as data and service providers for other entities in the Data Space.
        </p>
        <p>The DOME Data Space has an onboarding service that allows external entities to perform onboarding in an automated fashion by using Verifiable Credentials that have been issued by trusted entities. The complete Trust Framework used by DOME is composed from a series of Trust Frameworks, some managed internally using a governance model of DOME and some others managed externally but by trusted entities. At the root of the Trust Framework of DOME is the eIDAS Trust Framework and the pan-european recognized list of Trust Service Providers issuing the eIDAS compliant digital identities, in the form of certificates for signatures/seals.
        </p>
        <p>In order to participate in DOME, every legal person requires a certificate for seals or that one of its legal representatives has a certificate for signatures (or both). The DOME entity is registered in France with VAT number <b>VATFR-99999999</b>.
        </p>
    </section>


    <section id='participant'><h2>GoodAir: the company that wants will perform the onboarding process</h2>

        <p>The new participant is a business providing an Air Quality Monitoring application as a service. The business is called GoodAir and it operates the application, which receives data from a set of sensors that may or may not be the property of GoodAir. The sensors must have received a certification to be able to operate and send data to the GoodAir application.
        </p>
        <p>The company is registered in the tax agency and business registry of Spain with VAT number <b>VATES-12345678</b>.
        </p>
    </section>


    <section><h2>Jesus Ruiz: COO (Chief Operating Officer) of GoodAir</h2>

        <p>The GoodAir company is small and the only person that can sign contracts on behalf of the company is the COO (Chief Operating Officer). The COO is a legal representative of the company and she is registered as so in the business registry of Spain.
        </p>
        <p>The COO has a certificate for electronic signatures issued by one of the TSPs in Spain enabling the COO to perform electronic qualified signatures as legal representative of GoodAir, instead of doing them manually.
        </p>
        <p>The X.509 certificate of the COO has the following contents in the <code>Subject</code> field (the example below is derived from a real certificate but with the identifiers modified to be an example):
        </p>

<pre class="nohighlight" style="padding-left:0.5em;background-color: #282a36;"><code><span style="display:flex;"><span><span style="color:#50fa7b">cn</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">56565656V Jesus Ruiz</span>
</span></span><span style="display:flex;"><span><span style="color:#50fa7b">serialNumber</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">56565656V</span>
</span></span><span style="display:flex;"><span><span style="color:#50fa7b">givenName</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">Jesus</span>
</span></span><span style="display:flex;"><span><span style="color:#50fa7b">sn</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">Ruiz</span>
</span></span><span style="display:flex;"><span><span style="color:#50fa7b">2.5.4.97</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">VATES-12345678</span>
</span></span><span style="display:flex;"><span><span style="color:#50fa7b">o</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">GoodAir</span>
</span></span><span style="display:flex;"><span><span style="color:#50fa7b">c</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">ES</span>
</span></span><span style="display:flex;"><span><span style="color:#50fa7b">2.5.4.13</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">Notary:Juan Lopez/Protocol Num:7172/Date:07-06-2021</span>
</span></span></code></pre>
        <p>The above set of fields bind the legal identity of the COO with the identity of the business:
        </p>
        <ul>
            <li id='list_206.1'><code>serialNumber</code> is the unique number recognized by the Spanish Government for spanish citizens (called NIF).            </li>
            <li id='list_206.2'><code>2.5.4.97</code> is the <a href="https://oidref.com/2.5.4.97">official OID for <code>organizationIdentifier</code></a>. The contents of this field in the example certificate is the unique identifier for the legal person GoodAir.            </li>
        </ul>

        <p>Before issuing a certificate like the above, the TSP has to perform some validations to ensure that in the official source of truth (the business registry of Spain in this case) there is already registered information that states that the COO has indeed powers to act on behalf of GoodAir as a legal representative.
        </p>
    </section>


    <section><h2>RealTruth: a TSP (Trust Service Provider)</h2>

        <p>RealTruth is an EU TSP, which appears in the TL (Trusted List) maintained by the <a href="https://tl.bundesnetzagentur.de/TL-DE.XML">German Government</a>.
        </p>
        <p>RealTruth is a TSP based in Germany but operates in most of the countries of the EU and so being able to provide Trust Services across many countries, including Spain.
        </p>
        <p>As all TSPs in the TLs of the Member States, its entry in the TL includes one or more "Services" entries which describe the Trust Services provided by the TSP.
        </p>
        <p>A TSP can have one Service issuing certificates for signatures, another service issuing certificates for seals, another service for timestamping, etc.
        </p>
        <p>The regulator approves or suspends each service from a TSP individually, and the services are the root anchor for a given trust environment.
        </p>
        <p>In our case, the entry for RealTruth in the TL includes a `&ltTSPService&gt` entry, and inside it the `&ltServiceDigitalIdentity&gt` entry includes a DER-encoded certificate specifying the digital identity of the root anchor for that trust domain. The certificate for the Service has in the Subject field:
        </p>

<pre class="nohighlight" style="padding-left:0.5em;background-color: #282a36;"><code><span style="display:flex;"><span><span style="color:#50fa7b">2.5.4.97</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">VATDE-170173453</span>
</span></span><span style="display:flex;"><span><span style="color:#50fa7b">CN</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">DRV QC 11 MA CA 2017ca</span>
</span></span><span style="display:flex;"><span><span style="color:#50fa7b">OU</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">QC 11 Mitarbeiter CA</span>
</span></span><span style="display:flex;"><span><span style="color:#50fa7b">O</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">Deutsche Rentenversicherung Westfalen</span>
</span></span><span style="display:flex;"><span><span style="color:#50fa7b">C</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">DE</span>
</span></span></code></pre>
        <p>Which in the <code>organizationIdentifier</code> field (OID 2.5.4.97) specifies the unique organisation identifier assigned by the German regulatory authority to the TSP: VATDE-170173453.
        </p>
        <p>RealTruth provides `Legal Person Representative Certificates` which are qualified in accordance with Regulation (EU) No. 910/2014 of the European Parliament and of the Council of 23 July 2014 on electronic identification and trust services for electronic transactions in the internal market.
        </p>
        <p>The certification policies of RealTruth includes the following sentences:
        </p>

        <blockquote>
            <p>The Registration Authority must verify the following information in order to authenticate the identity of the organisation:
            </p>
            <ul>
                <li id='list_242.1'>The data concerning the business name or corporate name of the organisation.                </li>
                <li id='list_242.2'>The data relating to the constitution and legal status of the subscriber.                </li>
                <li id='list_242.3'><b>The data concerning the extent and validity of the powers of representation of the applicant.</b>                </li>
                <li id='list_242.4'>The data concerning the tax identification code of the organisation or equivalent code used in the country to whose legislation the subscriber is subject.                </li>
            </ul>

        </blockquote>

        <p>The TSP (RealTruth in this case) performs the verifications against `Authentic Sources`.
        </p>

        <blockquote>
            <p>Authentic Sources are the public or private repositories or systems recognised or required by law containing attributes about a natural or legal persons.
            </p>
            <p>The Authentic Sources in scope of Annex VI of the [eIDAS2] legislative proposal are sources for attributes on address, age, gender, civil status, family composition, nationality, education and training qualifications titles and licences, professional qualifications titles and licences, public permits and licences, financial and company data.
            </p>
            <p>Authentic Sources in scope of Annex VI are required to provide interfaces to Qualified Electronic Attestation of Attributes  (QEAA) Providers to verify the authenticity of the above attributes, either directly or via designated intermediaries recognised at national level.
            </p>
            <p>Authentic Sources may also issue (Q)EAA-s themselves if they meet the requirements of the eIDAS Regulation. It is up to the Member States to define terms and conditions for the provisioning of these services, but according to the minimum technical specifications, standards, and procedures applicable to the verification procedures for qualified electronic attestations of attributes.
            </p>
        </blockquote>

<!-- Original D2 diagram definition
    shape: sequence_diagram
    # Definition of the participants
    COO: COO of GoodAir {
        icon: https://icons.terrastruct.com/essentials%2F365-user.svg
    }
    TSP: Trust Service Provider {
        icon: https://icons.terrastruct.com/azure%2FWeb%20Service%20Color%2FApp%20Service%20Certificates.svg
    }
    registry: Authentic Sources {
        icon: https://icons.terrastruct.com/azure%2FIntegration%20Service%20Color%2FAzure%20Data%20Catalog.svg
    }
    COO -> TSP: Request a\ncertificate for signatures
    Verification {
        TSP."Data about the legal status of the company and powers of representation of the applicant"
        TSP <-> registry: Verify trusted data
    }
    TSP -> COO: Provide certificate for signature
 -->

<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" d2Version="v0.4.0-HEAD" preserveAspectRatio="xMinYMin meet" viewBox="0 0 1107 774"><svg id="d2-svg" class="d2-3874316800" width="1107" height="774" viewBox="-89 -49 1107 774"><rect x="-89.000000" y="-49.000000" width="1107.000000" height="774.000000" rx="0.000000" class=" fill-N7" stroke-width="0" /><style type="text/css"><![CDATA[
.d2-3874316800 .text {
	font-family: "d2-3874316800-font-regular";
}
@font-face {
	font-family: d2-3874316800-font-regular;
	src: url("data:application/font-woff;base64,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");
}
.d2-3874316800 .text-italic {
	font-family: "d2-3874316800-font-italic";
}
@font-face {
	font-family: d2-3874316800-font-italic;
	src: url("data:application/font-woff;base64,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");
}]]></style><style type="text/css"><![CDATA[.shape {
  shape-rendering: geometricPrecision;
  stroke-linejoin: round;
}
.connection {
  stroke-linecap: round;
  stroke-linejoin: round;
}
.blend {
  mix-blend-mode: multiply;
  opacity: 0.5;
}

		.d2-3874316800 .fill-N1{fill:#0A0F25;}
		.d2-3874316800 .fill-N2{fill:#676C7E;}
		.d2-3874316800 .fill-N3{fill:#9499AB;}
		.d2-3874316800 .fill-N4{fill:#CFD2DD;}
		.d2-3874316800 .fill-N5{fill:#DEE1EB;}
		.d2-3874316800 .fill-N6{fill:#EEF1F8;}
		.d2-3874316800 .fill-N7{fill:#FFFFFF;}
		.d2-3874316800 .fill-B1{fill:#0D32B2;}
		.d2-3874316800 .fill-B2{fill:#0D32B2;}
		.d2-3874316800 .fill-B3{fill:#E3E9FD;}
		.d2-3874316800 .fill-B4{fill:#E3E9FD;}
		.d2-3874316800 .fill-B5{fill:#EDF0FD;}
		.d2-3874316800 .fill-B6{fill:#F7F8FE;}
		.d2-3874316800 .fill-AA2{fill:#4A6FF3;}
		.d2-3874316800 .fill-AA4{fill:#EDF0FD;}
		.d2-3874316800 .fill-AA5{fill:#F7F8FE;}
		.d2-3874316800 .fill-AB4{fill:#EDF0FD;}
		.d2-3874316800 .fill-AB5{fill:#F7F8FE;}
		.d2-3874316800 .stroke-N1{stroke:#0A0F25;}
		.d2-3874316800 .stroke-N2{stroke:#676C7E;}
		.d2-3874316800 .stroke-N3{stroke:#9499AB;}
		.d2-3874316800 .stroke-N4{stroke:#CFD2DD;}
		.d2-3874316800 .stroke-N5{stroke:#DEE1EB;}
		.d2-3874316800 .stroke-N6{stroke:#EEF1F8;}
		.d2-3874316800 .stroke-N7{stroke:#FFFFFF;}
		.d2-3874316800 .stroke-B1{stroke:#0D32B2;}
		.d2-3874316800 .stroke-B2{stroke:#0D32B2;}
		.d2-3874316800 .stroke-B3{stroke:#E3E9FD;}
		.d2-3874316800 .stroke-B4{stroke:#E3E9FD;}
		.d2-3874316800 .stroke-B5{stroke:#EDF0FD;}
		.d2-3874316800 .stroke-B6{stroke:#F7F8FE;}
		.d2-3874316800 .stroke-AA2{stroke:#4A6FF3;}
		.d2-3874316800 .stroke-AA4{stroke:#EDF0FD;}
		.d2-3874316800 .stroke-AA5{stroke:#F7F8FE;}
		.d2-3874316800 .stroke-AB4{stroke:#EDF0FD;}
		.d2-3874316800 .stroke-AB5{stroke:#F7F8FE;}
		.d2-3874316800 .background-color-N1{background-color:#0A0F25;}
		.d2-3874316800 .background-color-N2{background-color:#676C7E;}
		.d2-3874316800 .background-color-N3{background-color:#9499AB;}
		.d2-3874316800 .background-color-N4{background-color:#CFD2DD;}
		.d2-3874316800 .background-color-N5{background-color:#DEE1EB;}
		.d2-3874316800 .background-color-N6{background-color:#EEF1F8;}
		.d2-3874316800 .background-color-N7{background-color:#FFFFFF;}
		.d2-3874316800 .background-color-B1{background-color:#0D32B2;}
		.d2-3874316800 .background-color-B2{background-color:#0D32B2;}
		.d2-3874316800 .background-color-B3{background-color:#E3E9FD;}
		.d2-3874316800 .background-color-B4{background-color:#E3E9FD;}
		.d2-3874316800 .background-color-B5{background-color:#EDF0FD;}
		.d2-3874316800 .background-color-B6{background-color:#F7F8FE;}
		.d2-3874316800 .background-color-AA2{background-color:#4A6FF3;}
		.d2-3874316800 .background-color-AA4{background-color:#EDF0FD;}
		.d2-3874316800 .background-color-AA5{background-color:#F7F8FE;}
		.d2-3874316800 .background-color-AB4{background-color:#EDF0FD;}
		.d2-3874316800 .background-color-AB5{background-color:#F7F8FE;}
		.d2-3874316800 .color-N1{color:#0A0F25;}
		.d2-3874316800 .color-N2{color:#676C7E;}
		.d2-3874316800 .color-N3{color:#9499AB;}
		.d2-3874316800 .color-N4{color:#CFD2DD;}
		.d2-3874316800 .color-N5{color:#DEE1EB;}
		.d2-3874316800 .color-N6{color:#EEF1F8;}
		.d2-3874316800 .color-N7{color:#FFFFFF;}
		.d2-3874316800 .color-B1{color:#0D32B2;}
		.d2-3874316800 .color-B2{color:#0D32B2;}
		.d2-3874316800 .color-B3{color:#E3E9FD;}
		.d2-3874316800 .color-B4{color:#E3E9FD;}
		.d2-3874316800 .color-B5{color:#EDF0FD;}
		.d2-3874316800 .color-B6{color:#F7F8FE;}
		.d2-3874316800 .color-AA2{color:#4A6FF3;}
		.d2-3874316800 .color-AA4{color:#EDF0FD;}
		.d2-3874316800 .color-AA5{color:#F7F8FE;}
		.d2-3874316800 .color-AB4{color:#EDF0FD;}
		.d2-3874316800 .color-AB5{color:#F7F8FE;}.appendix text.text{fill:#0A0F25}.md{--color-fg-default:#0A0F25;--color-fg-muted:#676C7E;--color-fg-subtle:#9499AB;--color-canvas-default:#FFFFFF;--color-canvas-subtle:#EEF1F8;--color-border-default:#0D32B2;--color-border-muted:#0D32B2;--color-neutral-muted:#EEF1F8;--color-accent-fg:#0D32B2;--color-accent-emphasis:#0D32B2;--color-attention-subtle:#676C7E;--color-danger-fg:red;}.sketch-overlay-B1{fill:url(#streaks-darker);mix-blend-mode:lighten}.sketch-overlay-B2{fill:url(#streaks-darker);mix-blend-mode:lighten}.sketch-overlay-B3{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-B4{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-B5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-B6{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AA2{fill:url(#streaks-dark);mix-blend-mode:overlay}.sketch-overlay-AA4{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AA5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AB4{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AB5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-N1{fill:url(#streaks-darker);mix-blend-mode:lighten}.sketch-overlay-N2{fill:url(#streaks-dark);mix-blend-mode:overlay}.sketch-overlay-N3{fill:url(#streaks-normal);mix-blend-mode:color-burn}.sketch-overlay-N4{fill:url(#streaks-normal);mix-blend-mode:color-burn}.sketch-overlay-N5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-N6{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-N7{fill:url(#streaks-bright);mix-blend-mode:darken}.light-code{display: block}.dark-code{display: none}]]></style><g id="COO"><g class="shape" ><rect x="12.000000" y="52.000000" width="176.000000" height="92.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><image href="https://icons.terrastruct.com/essentials%2F365-user.svg" x="12.000000" y="52.000000" width="46" height="46" /><text x="100.000000" y="103.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">COO of GoodAir</text></g><g id="TSP"><g class="shape" ><rect x="351.000000" y="52.000000" width="219.000000" height="92.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><image href="https://icons.terrastruct.com/azure%2FWeb%20Service%20Color%2FApp%20Service%20Certificates.svg" x="351.000000" y="52.000000" width="46" height="46" /><text x="460.500000" y="103.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">Trust Service Provider</text></g><g id="registry"><g class="shape" ><rect x="724.000000" y="52.000000" width="193.000000" height="92.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><image href="https://icons.terrastruct.com/azure%2FIntegration%20Service%20Color%2FAzure%20Data%20Catalog.svg" x="724.000000" y="52.000000" width="46" height="46" /><text x="820.500000" y="103.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">Authentic Sources</text></g><g id="(COO -- )[0]"><path d="M 100.000000 146.000000 L 100.000000 623.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:12.000000,11.838767;" mask="url(#d2-3874316800)" /></g><g id="(TSP -- )[0]"><path d="M 460.500000 146.000000 L 460.500000 623.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:12.000000,11.838767;" mask="url(#d2-3874316800)" /></g><g id="(registry -- )[0]"><path d="M 820.500000 146.000000 L 820.500000 623.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:12.000000,11.838767;" mask="url(#d2-3874316800)" /></g><g id="Verification"><g class="shape blend" ><rect x="100.000000" y="283.000000" width="760.000000" height="202.000000" class=" stroke-B1 fill-N5" style="stroke-width:0;" /></g><rect x="105.000000" y="288.000000" width="76.000000" height="21.000000" class=" fill-N5" /><text x="143.000000" y="304.000000" class="text fill-N1" style="text-anchor:middle;font-size:16px">Verification</text></g><g id="(COO -&gt; TSP)[0]"><marker id="mk-3488378134" markerWidth="10.000000" markerHeight="12.000000" refX="7.000000" refY="6.000000" viewBox="0.000000 0.000000 10.000000 12.000000" orient="auto" markerUnits="userSpaceOnUse"> <polygon points="0.000000,0.000000 10.000000,6.000000 0.000000,12.000000" class="connection fill-B1" stroke-width="2" /> </marker><path d="M 102.000000 221.000000 L 456.500000 221.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-3874316800)" /><text x="280.500000" y="219.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px"><tspan x="280.500000" dy="0.000000">Request a</tspan><tspan x="280.500000" dy="18.500000">certificate for signatures</tspan></text></g><g id="(TSP &lt;-&gt; registry)[0]"><marker id="mk-2451250203" markerWidth="10.000000" markerHeight="12.000000" refX="3.000000" refY="6.000000" viewBox="0.000000 0.000000 10.000000 12.000000" orient="auto" markerUnits="userSpaceOnUse"> <polygon points="10.000000,0.000000 0.000000,6.000000 10.000000,12.000000" class="connection fill-B1" stroke-width="2" /> </marker><path d="M 464.500000 470.000000 L 816.500000 470.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-start="url(#mk-2451250203)" marker-end="url(#mk-3488378134)" mask="url(#d2-3874316800)" /><text x="640.500000" y="476.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">Verify trusted data</text></g><g id="(TSP -&gt; COO)[0]"><path d="M 458.500000 547.000000 L 104.000000 547.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-3874316800)" /><text x="280.500000" y="553.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">Provide certificate for signature</text></g><g id="TSP.Data about the legal status of the company and powers of representation of the applicant"><g class="shape" ><path d="M 141 327 H 759 C 760 327 761 327 762 328 L 779 344 C 780 345 780 346 780 347 V 393 C 780 393 780 393 780 393 H 141 C 140 393 140 393 140 393 V 328 C 140 327 140 327 141 327 Z" class=" stroke-B1 fill-N7" style="stroke-width:2;" /><path d="M 779 393 H 141 C 140 393 140 393 140 392 V 328 C 140 327 140 327 141 327 H 758 C 759 327 759 327 759 328 V 345 C 759 346 760 347 761 347 H 779 C 780 347 780 347 780 348 V 392 C 779 393 780 393 779 393 Z" class=" stroke-B1 fill-N7" style="stroke-width:2;" /></g><text x="460.000000" y="365.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">Data about the legal status of the company and powers of representation of the applicant</text></g><mask id="d2-3874316800" maskUnits="userSpaceOnUse" x="-89" y="-49" width="1107" height="774">
<rect x="-89" y="-49" width="1107" height="774" fill="white"></rect>
<rect x="105.000000" y="288.000000" width="76" height="16" fill="black"></rect>
<rect x="200.000000" y="203.000000" width="161" height="37" fill="black"></rect>
<rect x="580.000000" y="460.000000" width="121" height="21" fill="black"></rect>
<rect x="177.000000" y="537.000000" width="207" height="21" fill="black"></rect>
</mask></svg></svg>
        <p>In accordance to the policies, RealTruth made those validations when issuing the certificate to the COO, in such a way that the Relying Parties verifying the certificate can have a high level of trust in the assertion that the natural person identified in the certificate (with Spanish ID of 56565656V) is a legal representative of he GoodAir company (organizationIdentifier VATES-12345678).
        </p>
    </section>


    <section><h2>John Doe: an administrative employee of GoodAir</h2>

        <p>This is an employee of the central administration department of GoodAir, who is going to be formally nominated to manage the onboarding process of GoodAir in the Data Space and some other operations in the Data Space once GoodAir is onboarded.. In particular, this employee is going to be nominated as a LEAR (Legal Entity Appointed Representative).
        </p>
        <p>As its name implies, the LEAR has to be nominated by a <b>legal representative</b> of the GoodAir organisation with the necessary legal authority to commit the organisation for this type of decision. In our case, the COO of GoodAir will nominate John Doe as the LEAR of GoodAir, delegating to him the capabilities to perform onboarding in the DOME and some other associated tasks. That means that John Doe will not be empowered to perform other actions like onboarding on other Data Spaces or signing contracts or invoices on behalf of GoodAir.
        </p>
        <p>To perform the nomination, the COO of GoodAir (a legal representative of GoodAir) will issue a special credential to John Doe and will sign the credential with his certificate for signatures as legal representative of GoodAir. The details are described later in this document.
        </p>
    </section>

</section>


<section><h2>The LEARCredential</h2>

    <p>In this example the LEARCredential will be generated using the certificate of the COO.
    </p>
    <p>The credential will be generated with an application that the COO will use as VC Issuer and that allows the employee to receive the credential using his credential wallet, using [[OpenID.VCI]] to achieve compliance with the EUDI Wallet ARF.
    </p>
    <p>The application enables the COO to specify the information required to create the LEARCredential, specifying the employee information and the specific type of LEARCredential. In general, there may be different instances of LEARCredentials for different purposes. One employee can have more than one LEARCredential, each having a different delegation of powers for different environments.
    </p>

    <section><h2>Claims identifying the employee</h2>

        <p>These are claims identifying the subject of the credential, the person who will act as LEAR. Each Data Space can define their own depending on their specific requirements. For our example, we use the same that are used for accessing the EC portal. The claims in the credential are the digital equivalent of their analog counterparts, displayed here for illustration.
        </p>

        <figure id='lear-appointment-letter-1'>
            <p><img src="images/lear-appointment-letter-1.png" alt="" />
            </p>

            <figcaption>LEAR subject identification data.
            </figcaption>

        </figure>

        <p>From the above form we can derive the following claims:
        </p>

<pre class="nohighlight" style="padding-left:0.5em;background-color: #282a36;"><code><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;title&#34;</span>: <span style="color:#f1fa8c">&#34;Mr.&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;first_name&#34;</span>: <span style="color:#f1fa8c">&#34;John&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;last_name&#34;</span>: <span style="color:#f1fa8c">&#34;Doe&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;gender&#34;</span>: <span style="color:#f1fa8c">&#34;M&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;postal_address&#34;</span>: <span style="color:#f1fa8c">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;email&#34;</span>: <span style="color:#f1fa8c">&#34;johndoe@goodair.com&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;telephone&#34;</span>: <span style="color:#f1fa8c">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;fax&#34;</span>: <span style="color:#f1fa8c">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;mobile_phone&#34;</span>: <span style="color:#f1fa8c">&#34;+34787426623&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre>
    </section>


    <section><h2>DID of the employee</h2>

        <p>In this example we use the `did:key` method for the DID of the employee, which provides a very high level of privacy and given the way the LEARCredential is generated it supports the verification of the chain of responsibility with a proper level of guarantee.
        </p>
        <p>If the highest levels of assurance and legal compliance is desired and the employee has an eIDAS certificate for signatures (in this case a personal one, not one like the COO), we could use the `elsi:did` for identification of the employee. However, the company (GoodAir) should make sure that the employee is aware of and agree to the possible privacy implications of doing so, given the personal details leaked from the eIDAS certificate.
        </p>
        <p>Those "exposed" personal details are exactly the same as if the employee signs any "normal" document with a digital certificate, but care should be taken by GoodAir because in this case the signature would be done "on behalf of" his employer and not as an individual personal action.
        </p>
        <p>Even though this is not unique to the `did:elsi` method, this also implies that the onboarding service has to handle those personal details in the same way as if it would be accepting any other document signed with a certificate for signatures, and ensure compliance with GDPR.
        </p>
        <p>In this example we assume the usage of the `did:key` method for the employee to protect his privacy as much as possible.
        </p>
        <p>This DID for the employee is an additional claim to the ones presented above, using the <code>id</code> field in the <code>credentialSubject</code> object. The DID corresponds to a keypair that was generated during the LEARCredential issuance process, where the private key was generated by the wallet of the employee and it was always under his control.
        </p>
        <p>This private key controlled by the employee can be used to sign challenges from Relying Parties that receive the credential to prove that the person sending the credential is the same person that is identified in the <code>credentialSubject</code> object of the LEARCredential.
        </p>
        <p>An example could be:
        </p>

<pre class="nohighlight" style="padding-left:0.5em;background-color: #282a36;"><code><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;id&#34;</span>: <span style="color:#f1fa8c">&#34;did:key:99ab5bca41bb45b78d242a46f0157b7d#key1&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre>
        <p>In this example, the signatures performed with the private key can not be JAdES-compliant ([[ETSI-JADES]]), but if the LEARCredential is attached to any other credential that is signed with this private key, then they can be traced up to the eIDAS certificate of the COO and so the chain of responsibility can be determined..
        </p>
        <p>With the DID for the employee, the set of claims identifying him would be then:
        </p>

<pre class="nohighlight" style="padding-left:0.5em;background-color: #282a36;"><code><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;id&#34;</span>: <span style="color:#f1fa8c">&#34;did:key:99ab5bca41bb45b78d242a46f0157b7d&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;title&#34;</span>: <span style="color:#f1fa8c">&#34;Mr.&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;first_name&#34;</span>: <span style="color:#f1fa8c">&#34;John&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;last_name&#34;</span>: <span style="color:#f1fa8c">&#34;Doe&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;gender&#34;</span>: <span style="color:#f1fa8c">&#34;M&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;postal_address&#34;</span>: <span style="color:#f1fa8c">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;email&#34;</span>: <span style="color:#f1fa8c">&#34;johndoe@goodair.com&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;telephone&#34;</span>: <span style="color:#f1fa8c">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;fax&#34;</span>: <span style="color:#f1fa8c">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;mobile_phone&#34;</span>: <span style="color:#f1fa8c">&#34;+34787426623&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre>
    </section>


    <section><h2><code>legalRepresentative</code></h2>

        <p>This section identifies the natural person (the COO) who is a legal representative of the legal person (GoodAir) and that is nominating the employee identified in the credential.
        </p>

<pre class="nohighlight" style="padding-left:0.5em;background-color: #282a36;"><code><span style="display:flex;"><span><span style="color:#f1fa8c">&#34;legalRepresentative&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;cn&#34;</span>: <span style="color:#f1fa8c">&#34;56565656V Jesus Ruiz&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;serialNumber&#34;</span>: <span style="color:#f1fa8c">&#34;56565656V&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;organizationIdentifier&#34;</span>: <span style="color:#f1fa8c">&#34;VATES-12345678&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;o&#34;</span>: <span style="color:#f1fa8c">&#34;GoodAir&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;c&#34;</span>: <span style="color:#f1fa8c">&#34;ES&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre>

        <aside class='note' title='Attributes for natural and legal persons'>
            <p>The attributes for natural persons and legal persons are derived from the <a href="https://ec.europa.eu/digital-building-blocks/wikis/download/attachments/467109280/eidas_saml_attribute_profile_v1.0_2.pdf?version=1&modificationDate=1639417533738&api=v2">eIDAS SAML Attribute Profile (eIDAS Technical Sub-group, 22 June 2015)</a>.
            </p>
            <p>All attributes for the eIDAS minimum data sets can be derived from the <a href="https://ec.europa.eu/isa2/solutions/core-vocabularies_en/">ISA Core Vocabulary</a> and <a href="https://joinup.ec.europa.eu/collection/semic-support-centre/specifications">https://joinup.ec.europa.eu/collection/semic-support-centre/specifications</a>.
            </p>
            <p>In the case of natural persons refer to the <a href="https://joinup.ec.europa.eu/asset/core_person/asset_release/core-person-vocabulary">Core Person Vocabulary</a> and in the case of legal persons refer to definitions for <a href="https://joinup.ec.europa.eu/asset/core_business/asset_release/core-business-vocabulary">Core Business Vocabulary</a>.
            </p>
        </aside>

    </section>


    <section><h2><code>rolesAndDuties</code> of the LEAR</h2>

        <p>The <code>rolesAndDuties</code> object points to an externally hosted object with the roles and duties of the LEAR. This external object can be either a machine-interpretable definition of the roles and duties in the credential, or just an external definition of the roles and duties in natural language. The ideal approach is the first option, expressing the semantics with a proper machine-readable language, because this will allow automatic access control at the granularity of the individual sentences of that expression language. The <code>rolesAndDuties</code> object can also have the definition embedded into it, instead of having a pointer to an external object.
        </p>
        <p>For illustration, the following figure shows an external object with some of the roles and duties in our LEAR example, in natural language.
        </p>

        <figure id='lear-appointment-letter-2'>
            <p><img src="images/lear-appointment-letter-2.png" alt="" />
            </p>

            <figcaption>LEAR roles and duties.
            </figcaption>

        </figure>

        <p>A simplistic implementation of the object inside the credential could be:
        </p>

<pre class="nohighlight" style="padding-left:0.5em;background-color: #282a36;"><code><span style="display:flex;"><span><span style="color:#f1fa8c">&#34;rolesAndDuties&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;type&#34;</span>: <span style="color:#f1fa8c">&#34;LEARCredential&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;id&#34;</span>: <span style="color:#f1fa8c">&#34;https://www.dome-project.com/lear/v1/6484994n4r9e990494&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>]
</span></span></code></pre>
        <p>Where the last part of the url can correspond to the hash of the external linked document to ensure that any modification or tampering can be detected. 
        </p>
    </section>


    <section><h2>Assembling the pieces together</h2>

        <p>With the above values for the example, the complete LEARCredential would become something like this:
        </p>

<pre class="nohighlight" style="padding-left:0.5em;background-color: #282a36;"><code><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;@context&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#f1fa8c">&#34;https://www.w3.org/2018/credentials/v1&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f1fa8c">&#34;https://www.dome-project.com/2022/credentials/learcredential/v1&#34;</span>
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;id&#34;</span>: <span style="color:#f1fa8c">&#34;urn:did:elsi:25159389-8dd17b796ac0&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;type&#34;</span>: [<span style="color:#f1fa8c">&#34;VerifiableCredential&#34;</span>, <span style="color:#f1fa8c">&#34;LEARCredential&#34;</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;issuer&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;id&#34;</span>: <span style="color:#f1fa8c">&#34;did:elsi:VATES-12345678&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;issuanceDate&#34;</span>: <span style="color:#f1fa8c">&#34;2022-03-22T14:00:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;validFrom&#34;</span>: <span style="color:#f1fa8c">&#34;2022-03-22T14:00:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;expirationDate&#34;</span>: <span style="color:#f1fa8c">&#34;2023-03-22T14:00:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;credentialSubject&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;id&#34;</span>: <span style="color:#f1fa8c">&#34;did:key:99ab5bca41bb45b78d242a46f0157b7d&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;title&#34;</span>: <span style="color:#f1fa8c">&#34;Mr.&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;first_name&#34;</span>: <span style="color:#f1fa8c">&#34;John&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;last_name&#34;</span>: <span style="color:#f1fa8c">&#34;Doe&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;gender&#34;</span>: <span style="color:#f1fa8c">&#34;M&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;postal_address&#34;</span>: <span style="color:#f1fa8c">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;email&#34;</span>: <span style="color:#f1fa8c">&#34;johndoe@goodair.com&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;telephone&#34;</span>: <span style="color:#f1fa8c">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;fax&#34;</span>: <span style="color:#f1fa8c">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;mobile_phone&#34;</span>: <span style="color:#f1fa8c">&#34;+34787426623&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;legalRepresentative&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;cn&#34;</span>: <span style="color:#f1fa8c">&#34;56565656V Jesus Ruiz&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;serialNumber&#34;</span>: <span style="color:#f1fa8c">&#34;56565656V&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;organizationIdentifier&#34;</span>: <span style="color:#f1fa8c">&#34;VATES-12345678&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;o&#34;</span>: <span style="color:#f1fa8c">&#34;GoodAir&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;c&#34;</span>: <span style="color:#f1fa8c">&#34;ES&#34;</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;rolesAndDuties&#34;</span>: [
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#ff79c6">&#34;type&#34;</span>: <span style="color:#f1fa8c">&#34;LEARCredential&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#ff79c6">&#34;id&#34;</span>: <span style="color:#f1fa8c">&#34;https://www.dome-project.com/lear/v1/6484994n4r9e990494&#34;</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        ]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre>
    </section>

</section>


<section><h2>The LEARCredential as a VerifiableID</h2>

    <p>DOME has an onboarding service that enables automatic self-onboarding of legal entities. In DOME when an entity (a
    legal person or a natural person acting on behalf of a legal person) wants to perform an action on a protected
    resource, we use Verifiable Credentials to perform authentication of the entity and then access control based on the
    content of the Verifiable Credential(s) presented by that entity, and possibly additional authorisation information
    that the Relying Party considers relevant for controlling access to the protected resource (for example, the
    contractual status of the resource, time of the day or other context information).
    </p>

    <section><h2>The VerifiableID as a type of Verifiable Credential</h2>

        <p>Not all types of Verifiable Credentials can be used for authentication, so for the purpose of this discussion we use the
        same taxonomy as <a href="https://ec.europa.eu/digital-building-blocks/wikis/display/EBSIDOC/Data+Models+and+Schemas">defined in EBSI</a>:
        </p>

        <figure id='vc_taxonomy'>
            <p><img src="images/login_in_DOME/verifiable_data_model.png" alt="" />
            </p>

            <figcaption>Request and receive Credential.
            </figcaption>

        </figure>

        <p>The full explanation is in the EBSI site, but for our purposes an example is enough.
        </p>
        <p>In the case of a Diploma as a Verifiable Credential (a Verifiable Diploma), it is a Verifiable Attestation which indicates that the subject has certain skills or has achieved certain learning outcomes through formal or non-formal learning context. However, as in the case with normal Diplomas in paper of PDF format, this credential can be presented by anyone that holds the credential. In other words, the credential binds the identity of the subject with the claims inside the credential, but does not bind the identity of the holder of the credential with the identity of the subject of the credential, which requires a special mechanism in the issuance process.
        </p>
        <p>Instead, <b>a <code>VerifiableID</code> is a special form of a Verifiable Credential that a natural or legal person can use in an electronic identification process as evidence of whom he/she/it is</b> (comparable with a passport, physical IDcard, driving licence, social security card, member-cardâ¦).
        </p>
        <p>In general, in an authentication and access control process, the entity willing to perform an action has to present (in a Verifiable Presentation) a VerifiableID and possibly one or more additional Verifiable Attestations. Of course, if the VerifiableID already contains all the information required by the Relying Party, then only one credential is required in the process.
        </p>
        <p>Most Verifiable Credentials will be issued as Verifiable Attestations, acting as efficient machine-processable and verifiable equivalent to their analog counterparts. Their purpose is to attest some attributes about the subject of the credential and not act as a mechanism for online authentication.
        </p>
        <p>VerifiableIDs can be of different types and be issued by different entities with different levels of assurance (in eIDAS terminology). They are issued with the purpose of serving as authentication mechanisms in online processes. In the near future, VerifiableIDs of the highest level of assurance (LoA High) will be issued to citizens and businesses by their governments under eIDAS2.
        </p>
    </section>


    <section><h2>The LEARCredential for some identification processes</h2>

        <p>But <b>any entity can issue VerifiableIDs</b>, though the acceptance by Relying Parties can not be ensured because it is the Relying Party the only one deciding if it trusts on the issuer and its process for generating the VerifiableID.
        </p>
        <p>DOME will make use of the future eIDAS2 VerifiableIDs when they are available and when they make sense in the context of DOME. But DOME defines some specific types of VerifiableIDs that are derived from eIDAS certificates for signatures/seals using the regulated standards for signatures, achieving a level of assurance that provides an acceptable level of legal certainty and reduced risk of repudiation.
        </p>
        <p>An example is the LEARCredential described in a section above, which has the same level of legal certainty as any document signed with the same certificates (like a contract or an invoice).
        </p>
        <p>Similarly, a Product provider (like GoodAir) who decides to use the DOME Trust and IAM framework or a compatible one for managing access to associated services by customers of their products will typically define specific types of VerifiableIDs if the standard ones in DOME or the existing and widely accepted ones are not suitable for the provider. In general, if a provider can use an existing and already used VerifiableID then it will facilitate potential customers access to its product because issuers of the VerifiableID do not have to modify or adapt their existing issuing processes.
        </p>
    </section>

</section>


<section><h2>Issuing the LEARCredential</h2>


    <section><h2>Overview</h2>

        <p>In this example we use what we call a <i>profile</i> of the [[OpenID.VCI]] protocol. The standard is very flexible, and we restrict the different options available in the standard and implement a set of the options with given values that are adequate for our use case, without impacting flexibility in practice.
        </p>
        <p>The following figure describes the main components that interact in the issuance of a credential in this profile.
        </p>
        <p>The description of the issuance process is general enough to be used for many types of credentials, but the text includes notes describing the concrete application of the process to the case of the LEARCredential.
        </p>

        <figure id='iss-overview'>
            <p><img src="images/issuance/issuance_background.svg" alt="" />
            </p>

            <figcaption>Overview of participants.
            </figcaption>

        </figure>

        <p><b>End user</b>
        </p>
        <p>This profile is valid for both natural and juridical persons, but because we are focusing on the issuance of the LEARCredential, in the detailed examples below we assume a natural person as the user.
        </p>
        <p><b>Wallet</b>
        </p>
        <p>The wallet is assumed to be a Web application with a wallet backend, maybe implemented as a PWA so it has some offline capabilities and can be installed in the device, providing a user experience similar to a native application. Private key management and most sensitive operations are performed in a backend server, operated by an entity trusted by the end user. Other profiles can support native and completely offline PWA mobile applications, for end users.
        </p>
        <p>This type of wallet supports natural persons, juridical persons and natural persons who are legal entity representatives of juridical persons. For juridical persons the wallet is usually called an `enterprise wallet` but we will use here just the term <code>wallet</code> unless the distinction is required.
        </p>
        <p>In this profile we assume that the wallet is not previously registered with the Issuer and that the wallet does not expose public endpoints that are called by the Issuer, even if the wallet has a backend server that could implement those endpoints. That makes the wallet implementations in this profile to be very similar in interactions to a full mobile implementation, making migration to a full mobile implementation easier.
        </p>
        <p>In other words, from the point of view of the Issuer, the wallet in this profile is almost indistinguishable from a full mobile wallet.
        </p>
        <p><b>User Laptop</b>
        </p>
        <p>For clarity of exposition, we assume in this profile that the End User starts the interactions with the Issuer with an internet browser (user agent) in her laptop. However, there is nothing in the interactions which limits those interactions to a laptop form factor and the End User can interact with any internet browser in any device (mobile, tablet, kiosk).
        </p>
        <p><b>Issuer</b>
        </p>
        <p>In this profile we assume that the Issuer is composed of two components:
        </p>
        <ul>
            <li id='list_538.1'>Authorization server: the backend component implementing the existing authentication/authorization functionalities for the Issuer entity.            </li>
            <li id='list_538.2'>Issuer backend: the main server implementing the business logic as a web application and additional backend APIs required for issuance of credentials.            </li>
        </ul>

        <p>The Issuer backend and the Authorization server could be implemented as a single component in a real use case, but we assume here that they are separated to make the profile more general, especially for big entities and also when using Trust Service Providers for cloud signature and credential issuance, for example.
        </p>
        <p><b>Authentication of End User and previous Issuer-End User relationship</b>
        </p>
        <p>We assume that the Issuer and End User have a previous relationship and that the Issuer has performed the KYC required by regulation and needed to be able to issue Verifiable Credentials attesting some attributes about the End User. We assume that there is an existing trusted authentication mechanism (not necessarily related to Verifiable Credentials) that the End User employs to access protected resources from the Issuer. For example, the user is an employee or a customer of the Issuer, or the Issuer is a Local Administration and the End User is a citizen living in that city.
        </p>
    </section>


    <section><h2>Authentication</h2>


        <figure id='iss-authentication'>
            <p><img src="images/issuance/issuance_authentication.svg" alt="" />
            </p>

            <figcaption>Issuance authentication.
            </figcaption>

        </figure>

        <p>Before requesting a new credential, the End User has to authenticate with the Issuer with whatever mechanism is already implemented by the Issuer. This profile does not require that it is based on OIDC, Verifiable Credentials or any other specific mechanism.
        </p>
        <p>The level of assurance (LoA) of this authentication mechanism is one of the factors that will determine the confidence that the Verifiers can have on the credentials received by them from a given Issuer.
        </p>

        <aside class='note' title='LEARCredential'>
            <p>In the case of the LEARCredential, the End User (John Doe) is an employee of GoodAir and in order to receive the credential John first has to authenticate into the company systems using whatever mechanism GoodAir uses for employee authentication.
            </p>
            <p>Being a modern company, GoodAir uses Verifiable Credentials IAM but this is not a requirement for the issuance of the LEARCredential.
            </p>
        </aside>

    </section>


    <section><h2>Credential Offer</h2>


        <figure id='iss-credentialoffer'>
            <p><img src="images/issuance/issuance_credentialoffer.svg" alt="" />
            </p>

            <figcaption>Credential offer.
            </figcaption>

        </figure>

        <p>In this profile the wallet does not have to implement the Credential Offer Endpoint described in section 4 of [[OpenID.VCI]].
        </p>
        <p>Instead, the Credential Issuer renders a QR code containing a reference to the Credential Offer that can be scanned by the End-User using a Wallet, as described in section 4.1 of [[OpenID.VCI]].
        </p>
        <p>According to the spec, the Credential Offer object is a JSON object containing the Credential Offer parameters and can be sent by value or by reference. To avoid problems with the size of the QR travelling in the URL, this profile requires that the QR contains the <code>credential_offer_uri</code>, which is a URL using the <code>https</code> scheme referencing a resource containing a JSON object with the Credential Offer parameters. The <code>credential_offer_uri</code> endpoint should be implemented by the Issuer backend.
        </p>

        <section><h2>Credential Offer Parameters</h2>

            <p>This profile restricts the options available in section 4.1.1 of [[OpenID.VCI]]. The profile defines a Credential Offer object containing the following parameters:
            </p>
            <ul>
                <li id='list_585.1'><code>credential_issuer</code>: REQUIRED. The URL of the Credential Issuer that will be used by the Wallet to obtain one or more Credentials.                </li>
                <li id='list_585.2'><code>credentials</code>: REQUIRED. A JSON array, where every entry is a JSON string. To achieve interoperability faster, this profile defines a global Trusted Credential Schemas List where well-known credential schemas are defined, in addition to the individual credentials that each Issuer can define themselves. The string value MUST be one of the id values in one of the objects in the <code>credentials_supported</code> metadata parameter of the Trusted Credential Schemas List (described later), or one of the id values in one of the objects in the <code>credentials_supported</code> Credential Issuer metadata parameter provided by the Credential Issuer. When processing, the Wallet MUST resolve this string value to the respective object. The credentials defined in the global Trusted Credential Schema List have precedence over the ones defined by the Credential Issuer.                <div>

                    <aside class='note' title='LEARCredential'>
                        <p>The only credential being offered in our case is the LEARCredential, so this is the credential schema that should be specified here. The LEARCredential is a credential known globally to the DOME ecosystem, so its schema should be published and be available in the Trusted Credential Schemas List.
                        </p>
                    </aside>

                </div>
                </li>
                <li id='list_585.3'><code>grants</code>: REQUIRED. A JSON object indicating to the Wallet the Grant Type <code>pre-authorized_code</code>. This grant is represented by a key and an object, where the key is `urn:ietf:params:oauth:grant-type:pre-authorized_code`. In this profile the credential issuance flow requires initial authentication of the End User by the Credential Issuer, so the Pre-Authorized Code Flow achieves a good level of security and we do not need the more general Authorization Code Flow.                <div>
                    <p>In other scenarios like when the wallet is a native mobile application and the user interacts with the Issuer exclusively with the mobile (without the laptop), then the Authorization Code Flow has to be used. This can be described in detail in a different profile.
                    </p>
                </div>
                </li>
            </ul>

            <p>The grant object contains the following values:
            </p>
            <ul>
                <li id='list_599.1'><code>pre-authorized_code</code>: REQUIRED. The code representing the Credential Issuer's authorization for the Wallet to obtain Credentials of a certain type. This code MUST be short lived and single-use. This parameter value MUST be included in the subsequent Token Request with the Pre-Authorized Code Flow.                </li>
                <li id='list_599.2'><code>user_pin_required</code>: REQUIRED. The [[OpenID.VCI]] standard says it is RECOMMENDED, but this profile specifies the user pin to achieve a greater level of security. This field is a boolean value specifying whether the Credential Issuer expects presentation of a user PIN along with the Token Request in a Pre-Authorized Code Flow. Default is false. This PIN is intended to bind the Pre-Authorized Code to a certain transaction in order to prevent replay of this code by an attacker that, for example, scanned the QR code while standing behind the legit user. It is RECOMMENDED to send a PIN via a separate channel. The PIN value MUST be sent in the <code>user_pin</code> parameter with the respective Token Request.                </li>
            </ul>

            <p>The following non-normative example shows a Credential Offer object where the Credential Issuer offers the issuance of one Credential ("LEARCredential"):
            </p>

<pre class="nohighlight" style="padding-left:0.5em;background-color: #282a36;"><code><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;credential_issuer&#34;</span>: <span style="color:#f1fa8c">&#34;https://credential-issuer.example.com&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;credentials&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#f1fa8c">&#34;LEARCredential&#34;</span>
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;grants&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;urn:ietf:params:oauth:grant-type:pre-authorized_code&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;pre-authorized_code&#34;</span>: <span style="color:#f1fa8c">&#34;asju68jgtyk9ikkew&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;user_pin_required&#34;</span>: <span style="color:#ff79c6">true</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre>
        </section>


        <section><h2>Contents of the QR code</h2>

            <p>Below is a non-normative example of the Credential Offer displayed by the Credential Issuer as a QR code when the Credential Offer is passed by reference, as required in this profile:
            </p>

<pre class="nohighlight" style="padding-left:0.5em;background-color: #282a36;"><code><span style="display:flex;"><span><span style="color:#50fa7b">https://credential-issuer.example.com/credential-offer?</span>
</span></span><span style="display:flex;"><span><span style="color:#50fa7b">credential_offer_uri</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">https%3A%2F%2Fserver%2Eexample%2Ecom%2Fcredential-offer%2F5j349k3e3n23j</span>
</span></span></code></pre>
            <p>Which in plain text would be:
            </p>

<pre class="nohighlight" style="padding-left:0.5em;background-color: #282a36;"><code><span style="display:flex;"><span><span style="color:#50fa7b">https://credential-issuer.example.com/credential-offer?</span>
</span></span><span style="display:flex;"><span><span style="color:#50fa7b">credential_offer_uri</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">https://server.example.com/credential-offer/5j349k3e3n23j</span>
</span></span></code></pre>
            <p>To increase security, the Issuer MUST make sure that every Credential Offer URI is unique for all credential offers created. This is the purpose of the nonce (<code>5j349k3e3n23j</code>) at the end of the url in the example. Issuers can implement whatever mechanism they wish, as far as it is transparent to the wallet.
            </p>
        </section>

    </section>


    <section><h2>Credential Issuer Metadata</h2>

        <p>The Wallet backend retrieves the Credential Issuer's configuration using the Credential Issuer Identifier that was received in the Credential Offer.
        </p>
        <p>A Credential Issuer is identified in this context by a case sensitive URL using the https scheme that contains scheme, host and, optionally, port number and path components, but no query or fragment components. No DID is used in this context.
        </p>
        <p>Credential Issuers MUST make a JSON document available at the path formed by concatenating the string `/.well-known/openid-credential-issuer` to the Credential Issuer Identifier. If the Credential Issuer value contains a path component, any terminating / MUST be removed before appending `/.well-known/openid-credential-issuer`.
        </p>
        <p><code>openid-credential-issuer</code> MUST point to a JSON document compliant with this specification and MUST be returned using the `application/json` content type.
        </p>
        <p>The retrieval of the Credential Issuer configuration is illustrated below.
        </p>

        <figure id='iss-issuermetadata'>
            <p><img src="images/issuance/issuance_issuermetadata.svg" alt="" />
            </p>

            <figcaption>Issuer metadata.
            </figcaption>

        </figure>


        <section><h2>Credential Issuer Metadata Parameters</h2>

            <p>The object contained in <code>openid-credential-issuer</code> contains the following:
            </p>
            <ul>
                <li id='list_659.1'><code>credential_issuer</code>: REQUIRED. The Credential Issuer's identifier.                </li>
                <li id='list_659.2'><code>credential_endpoint</code>: REQUIRED. URL of the Credential Issuer's Credential Endpoint. This URL MUST use the https scheme and MAY contain port, path and query parameter components.                </li>
                <li id='list_659.3'><code>credentials_supported</code>: REQUIRED. A JSON array containing a list of JSON objects, each of them representing metadata about a separate credential type that the Credential Issuer can issue. The JSON objects in the array MUST conform to the structure of the Section XXXX.                </li>
            </ul>

            <p>TODO: define a global directory of credentials supported to eliminate requirement for each individual Issuer to publish its own list.
            </p>
            <p>This profile does not make use of the following parameters:
            </p>
            <ul>
                <li id='list_670.1'><code>authorization_server</code> parameter, because it uses the <code>pre-authorized_code</code> Grant type.                </li>
                <li id='list_670.2'><code>batch_credential_endpoint</code> parameter. It indicates that the Credential Issuer does not support the Batch Credential Endpoint.                </li>
                <li id='list_670.3'><code>display</code> parameter.                </li>
            </ul>

        </section>

    </section>


    <section><h2>OAuth 2.0 Authorization Server Metadata</h2>

        <p>This specification also defines a new OAuth 2.0 Authorization Server metadata [[RFC8414]] parameter to publish whether the AS that the Credential Issuer relies on for authorization, supports anonymous Token Requests with the Pre-authorized Grant Type. It is defined as follows:
        </p>
        <ul>
            <li id='list_682.1'><code>pre-authorized_grant_anonymous_access_supported</code>: OPTIONAL. A JSON Boolean indicating whether the issuer accepts a Token Request with a Pre-Authorized Code but without a client id. The default is false.            </li>
        </ul>

    </section>


    <section><h2>Access Token</h2>


        <figure id='issuance_accesstoken'>
            <p><img src="images/issuance/issuance_accesstoken.svg" alt="" />
            </p>

            <figcaption>Access Token.
            </figcaption>

        </figure>

        <p>The Wallet invokes the Token Endpoint implemented by the Authorization Server, which issues an Access Token and, optionally, a Refresh Token in exchange for the Pre-authorized Code that the wallet obtained in the Credential Offer.
        </p>

        <section><h2>Token Request</h2>

            <p>After the wallet receives the Credential Issuer Metadata, a Token Request is made as defined in Section 4.1.3 of [[RFC6749]].
            </p>
            <p>The following are the extension parameters to the Token Request used in a Pre-Authorized Code Flow as used in this profile:
            </p>
            <ul>
                <li id='list_701.1'><code>pre-authorized_code</code>: REQUIRED. The code representing the authorization to obtain Credentials of a certain type.                </li>
                <li id='list_701.2'><code>user_pin</code>: OPTIONAL. String value containing a user PIN. This value MUST be present if user_pin_required was set to true in the Credential Offer. The string value MUST consist of maximum 8 numeric characters (the numbers 0 - 9).                </li>
            </ul>

            <p>In this profile the Wallet does not have to authenticate when using the Token Endpoint, because we are using the Pre-Authorized Code Grant Type, given the level of trust between the Issuer and the End User and that authentication was already performed at the beginning of the flow.
            </p>
            <p>Below is a non-normative example of a Token Request:
            </p>

<pre class="nohighlight" style="padding-left:0.5em;background-color: #282a36;"><code><span style="display:flex;"><span><span style="color:#50fa7b">POST</span> /token <span style="color:#ff79c6">HTTP</span><span style="color:#ff79c6">/</span><span style="color:#bd93f9">1.1</span>
</span></span><span style="display:flex;"><span>Host<span style="color:#ff79c6">:</span> server.example.com
</span></span><span style="display:flex;"><span>Content-Type<span style="color:#ff79c6">:</span> application/x-www-form-urlencoded
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Apre-authorized_code
</span></span><span style="display:flex;"><span>&amp;pre-authorized_code=SplxlOBeZQQYbYS6WxSbIA
</span></span><span style="display:flex;"><span>&amp;user_pin=493536
</span></span></code></pre>
        </section>


        <section><h2>Successful Token Response</h2>

            <p>Token Responses are made as defined in [[RFC6749]].
            </p>
            <p>In addition to the response parameters defined in [[RFC6749]], the Authorization Server returns the following parameters:
            </p>
            <ul>
                <li id='list_726.1'><code>c_nonce</code>: REQUIRED. JSON string containing a nonce to be used to create a proof of possession of key material when requesting a Credential. The Wallet MUST use this nonce value for its subsequent credential requests until the Credential Issuer provides a fresh nonce.                </li>
                <li id='list_726.2'><code>c_nonce_expires_in</code>: REQUIRED. JSON integer denoting the lifetime in seconds of the c_nonce.                </li>
            </ul>

            <p>Below is a non-normative example of a Token Response:
            </p>

<pre class="nohighlight" style="padding-left:0.5em;background-color: #282a36;"><code><span style="display:flex;"><span><span style="color:#ff79c6">HTTP</span><span style="color:#ff79c6">/</span><span style="color:#bd93f9">1.1</span> <span style="color:#bd93f9">200</span> OK
</span></span><span style="display:flex;"><span>Content-Type<span style="color:#ff79c6">:</span> application/json
</span></span><span style="display:flex;"><span>Cache-Control<span style="color:#ff79c6">:</span> no-store
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;access_token&#34;</span>: <span style="color:#f1fa8c">&#34;eyJhbGciOiJSUzI1NiIsInR5cCI6Ikp..sHQ&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;token_type&#34;</span>: <span style="color:#f1fa8c">&#34;bearer&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;expires_in&#34;</span>: <span style="color:#bd93f9">86400</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;c_nonce&#34;</span>: <span style="color:#f1fa8c">&#34;tZignsnFbp&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;c_nonce_expires_in&#34;</span>: <span style="color:#bd93f9">86400</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre>
        </section>


        <section><h2>Token Error Response</h2>

            <p>If the Token Request is invalid or unauthorized, the Authorization Server constructs the error response as defined in section 6.3 of [[OpenID.VCI]].
            </p>
        </section>

    </section>


    <section><h2>Request and receive Credential</h2>


        <figure id='issuance_requestcredential'>
            <p><img src="images/issuance/issuance_requestcredential.svg" alt="" />
            </p>

            <figcaption>Request and receive Credential.
            </figcaption>

        </figure>

        <p>The Wallet backend invokes the Credential Endpoint, which issues a Credential as approved by the End-User upon presentation of a valid Access Token representing this approval.
        </p>
        <p>Communication with the Credential Endpoint MUST utilize TLS.
        </p>
        <p>The client can request issuance of a Credential of a certain type multiple times, e.g., to associate the Credential with different public keys/Decentralized Identifiers (DIDs) or to refresh a certain Credential.
        </p>
        <p>If the Access Token is valid for requesting issuance of multiple Credentials, it is at the client's discretion to decide the order in which to request issuance of multiple Credentials requested in the Authorization Request.
        </p>

        <section><h2>Binding the Issued Credential to the identifier of the End-User possessing that Credential</h2>

            <p>The Issued Credential MUST be cryptographically bound to the identifier of the End-User who possesses the Credential. Cryptographic binding allows the Verifier to verify during the presentation of a Credential that the End-User presenting a Credential is the same End-User to whom that Credential was issued.
            </p>
            <p>The Wallet has to provide proof of control alongside key material (proof that did).
            </p>
        </section>


        <section><h2>Credential Request</h2>

            <p>The Wallet backend makes a Credential Request to the Credential Endpoint by sending the following parameters in the entity-body of an HTTP POST request using the `application/json` media type.
            </p>
            <ul>
                <li id='list_778.1'><code>format</code>: REQUIRED. This profile uses the Credential format identifier <code>jwt_vc_json</code>.                </li>
                <li id='list_778.2'><code>proof</code>: OPTIONAL. JSON object containing proof of possession of the key material the issued Credential shall be bound to. The specification envisions use of different types of proofs for different cryptographic schemes. The proof object MUST contain a proof_type claim of type JSON string denoting the concrete proof type. This type determines the further claims in the proof object and its respective processing rules. Proof types are defined in Section 7.2.1.                </li>
            </ul>

            <p>The proof element MUST incorporate a c_nonce value generated by the Credential Issuer and the Credential Issuer Identifier (audience) to allow the Credential Issuer to detect replay. The way that data is incorporated depends on the proof type. In a JWT, for example, the c_nonce is conveyd in the nonce claims whereas the audience is conveyed in the aud claim. In a Linked Data proof, for example, the c_nonce is included as the challenge element in the proof object and the Credential Issuer (the intended audience) is included as the domain element.
            </p>

            <section><h2>Proof Type</h2>

                <p>This specification defines the following values for proof_type:
                </p>
                <p><code>jwt</code>: objects of this type contain a single jwt element with a JWS [RFC7515] as proof of possession. The JWT MUST contain the following elements:
                </p>
                    <ul>
                        <li id='list_791.1'>in the JOSE Header,                        <div>
                            <ul>
                                <li id='list_794.1'><code>typ</code>: REQUIRED. MUST be `openid4vci-proof+jwt`, which explicitly types the proof JWT as recommended in Section 3.11 of [[RFC8725]].                                </li>
                                <li id='list_794.2'><code>alg</code>: REQUIRED. A digital signature algorithm identifier such as per IANA "JSON Web Signature and Encryption Algorithms" registry. MUST NOT be none or an identifier for a symmetric algorithm (MAC).                                </li>
                                <li id='list_794.3'><code>kid</code>: REQUIRED. JOSE Header containing the key ID. The Credential will be bound to a DID, so the kid refers to a DID URL which identifies a particular key in the DID Document that the Credential will be bound to.                                </li>
                            </ul>

                        </div>
                        </li>
                        <li id='list_791.2'>in the JWT body,                        <div>
                            <ul>
                                <li id='list_803.1'><code>aud</code>: REQUIRED (string). The value of this claim MUST be the Credential Issuer URL of the Credential Issuer.                                </li>
                                <li id='list_803.2'><code>iat</code>: REQUIRED (number). The value of this claim MUST be the time at which the proof was issued using the syntax defined in [[RFC7519]].                                </li>
                                <li id='list_803.3'><code>nonce</code>: REQUIRED (string). The value type of this claim MUST be a string, where the value is the <code>c_nonce</code> provided by the Credential Issuer.                                </li>
                            </ul>

                        </div>
                        </li>
                    </ul>

                <p>The Credential Issuer MUST validate that the proof is actually signed by a key identified in the JOSE Header.
                </p>
                <p>Below is a non-normative example of a proof parameter (dots in the middle of jwt for display purposes only):
                </p>

<pre class="nohighlight" style="padding-left:0.5em;background-color: #282a36;"><code><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;proof_type&#34;</span>: <span style="color:#f1fa8c">&#34;jwt&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;jwt&#34;</span>: <span style="color:#f1fa8c">&#34;eyJraWQiOiJkaWQ6ZXhhb....aZKPxgihac0aW9EkL1nOzM&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre>
                <p>where the JWT looks like this:
                </p>

<pre class="nohighlight" style="padding-left:0.5em;background-color: #282a36;"><code><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;typ&#34;</span>: <span style="color:#f1fa8c">&#34;openid4vci-proof+jwt&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;alg&#34;</span>: <span style="color:#f1fa8c">&#34;ES256&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;kid&#34;</span>:<span style="color:#f1fa8c">&#34;did:example:ebfeb1f712ebc6f1c276e12ec21/keys/1&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;iss&#34;</span>: <span style="color:#f1fa8c">&#34;s6BhdRkqt3&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;aud&#34;</span>: <span style="color:#f1fa8c">&#34;https://server.example.com&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;iat&#34;</span>: <span style="color:#bd93f9">1659145924</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;nonce&#34;</span>: <span style="color:#f1fa8c">&#34;tZignsnFbp&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre>
            </section>

        </section>


        <section><h2>Credential Response</h2>

            <p>This profile restricts Credential Response to be Synchronous and Deferred response is not used. The Credential Issuer MUST be able to immediately issue a requested Credential and send it to the Client.
            </p>
            <p>The following claims are used in the Credential Response:
            </p>
            <ul>
                <li id='list_842.1'><code>format</code>: REQUIRED. JSON string denoting the format of the issued Credential. This profile uses the format identifier <code>jwt_vc_json</code>.                </li>
                <li id='list_842.2'><code>credential</code>: REQUIRED. Contains issued Credential. MUST be a JSON string.                </li>
                <li id='list_842.3'><code>c_nonce</code>: OPTIONAL. JSON string containing a nonce to be used to create a proof of possession of key material when requesting a Credential. When received, the Wallet MUST use this nonce value for its subsequent credential requests until the Credential Issuer provides a fresh nonce.                </li>
                <li id='list_842.4'><code>c_nonce_expires_in</code>: OPTIONAL. JSON integer denoting the lifetime in seconds of the c_nonce.                </li>
            </ul>

            <p>Below is a non-normative example of a Credential Response:
            </p>

<pre class="nohighlight" style="padding-left:0.5em;background-color: #282a36;"><code><span style="display:flex;"><span><span style="color:#ff79c6">HTTP</span><span style="color:#ff79c6">/</span><span style="color:#bd93f9">1.1</span> <span style="color:#bd93f9">200</span> OK
</span></span><span style="display:flex;"><span>Content-Type<span style="color:#ff79c6">:</span> application/json
</span></span><span style="display:flex;"><span>Cache-Control<span style="color:#ff79c6">:</span> no-store
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;format&#34;</span>: <span style="color:#f1fa8c">&#34;jwt_vc_json&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;credential&#34;</span> : <span style="color:#f1fa8c">&#34;LUpixVCWJk0eOt4CXQe1NXK....WZwmhmn9OQp6YxX0a2L&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;c_nonce&#34;</span>: <span style="color:#f1fa8c">&#34;fGFF7UkhLa&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;c_nonce_expires_in&#34;</span>: <span style="color:#bd93f9">86400</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre>
        </section>


        <section><h2>Credential Error Response</h2>

            <p>When the Credential Request is invalid or unauthorized, the Credential Issuer constructs the error response as defined in section 7.3.1 of OIDCVCI.
            </p>
        </section>


        <section><h2>Credential Issuer Provided Nonce</h2>

            <p>Upon receiving a Credential Request, the Credential Issuer MUST require the Wallet to send a proof of possession of the key material it wants a Credential to be bound to. This proof MUST incorporate a nonce generated by the Credential Issuer. The Credential Issuer will provide the client with a nonce in an error response to any Credential Request not including such a proof or including an invalid proof.
            </p>
            <p>Below is a non-normative example of a Credential Response with the Credential Issuer requesting a Wallet to provide in a subsequent Credential Request a proof that is bound to a <code>c_nonce</code>:
            </p>

<pre class="nohighlight" style="padding-left:0.5em;background-color: #282a36;"><code><span style="display:flex;"><span><span style="color:#ff79c6">HTTP</span><span style="color:#ff79c6">/</span><span style="color:#bd93f9">1.1</span> <span style="color:#bd93f9">400</span> Bad Request
</span></span><span style="display:flex;"><span>Content-Type<span style="color:#ff79c6">:</span> application/json
</span></span><span style="display:flex;"><span>Cache-Control<span style="color:#ff79c6">:</span> no-store
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;error&#34;</span>: <span style="color:#f1fa8c">&#34;invalid_or_missing_proof&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;error_description&#34;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f1fa8c">&#34;Credential Issuer requires proof to be bound to a Credential Issuer provided nonce.&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;c_nonce&#34;</span>: <span style="color:#f1fa8c">&#34;8YE9hCnyV2&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;c_nonce_expires_in&#34;</span>: <span style="color:#bd93f9">86400</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre>
        </section>

    </section>

</section>


<section><h2>Authenticating with the LEARCredential</h2>


    <section><h2>The login process</h2>


        <section><h2>Starting the Self-Issued OpenID Provider (SIOP) flow</h2>

<!-- Original D2 diagram definition
    shape: sequence_diagram
    # Definition of the participants
    user: John Doe {
        icon: https://icons.terrastruct.com/essentials%2F365-user.svg
    }
    mobile: Webapp {
        icon: https://icons.terrastruct.com/tech%2F052-smartphone-3.svg
    }
    browser: Laptop {
        icon: https://icons.terrastruct.com/tech%2Fbrowser-2.svg
    }
    portal: Portal {
        icon: https://icons.terrastruct.com/azure%2FIntegration%20Service%20Color%2FSoftware%20as%20a%20Service%20%28SaaS%29.svg
    }
    verifier: VC Verifier {
        icon: https://icons.terrastruct.com/azure%2FSecurity%20Service%20Color%2FSecurity%20Center.svg
    }
    # ==================================================
    # -(1) The user (GoodAir employee) accesses the DOME portal to perform the onboarding process.
    user -> browser: (1) Access DOM portal {
        style.stroke-dash: 5
    }
    browser -> portal.t: (1) Access DOM portal
    # -(2) The portal redirects the user to the login page of the Verifier component of DOME Onboarding. The page shows a button labelled âLogin with Verifiable Credentialsâ or something similar.
    portal.t -> browser.t: (2) HTTP 302 (redirect)
    browser.t -> verifier.t: (2) Access Login page
    # -(3) The Verifier generates and displays a QR code, containing inside the URL of the `/authentication-requests` endpoint of the Verifier component which will be used to start the OIDCVP process.
    verifier.t -> browser: (3) Display QR code
    # -(4) The user starts the scan with the wallet
    user -> mobile.t: Start QR scan {
        style.stroke-dash: 5
    }
    browser -> mobile.t: (4) Scan QR code {
        style.stroke-dash: 5
    }
    # -(5) After confirmation by the user, the wallet performs a ` GET /authentication-requests` endpoint that was inside the QR code. The reply to the GET request is an Authentication Request
    mobile.t -> verifier: (5) GET /authentication-requests
    verifier -> mobile: (5) Reply with Authentication Request
 -->

<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" d2Version="v0.4.0-HEAD" preserveAspectRatio="xMinYMin meet" viewBox="0 0 1023 994"><svg id="d2-svg" class="d2-2868454509" width="1023" height="994" viewBox="-89 -49 1023 994"><rect x="-89.000000" y="-49.000000" width="1023.000000" height="994.000000" rx="0.000000" class=" fill-N7" stroke-width="0" /><style type="text/css"><![CDATA[
.d2-2868454509 .text {
	font-family: "d2-2868454509-font-regular";
}
@font-face {
	font-family: d2-2868454509-font-regular;
	src: url("data:application/font-woff;base64,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");
}
.d2-2868454509 .text-italic {
	font-family: "d2-2868454509-font-italic";
}
@font-face {
	font-family: d2-2868454509-font-italic;
	src: url("data:application/font-woff;base64,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");
}]]></style><style type="text/css"><![CDATA[.shape {
  shape-rendering: geometricPrecision;
  stroke-linejoin: round;
}
.connection {
  stroke-linecap: round;
  stroke-linejoin: round;
}
.blend {
  mix-blend-mode: multiply;
  opacity: 0.5;
}

		.d2-2868454509 .fill-N1{fill:#0A0F25;}
		.d2-2868454509 .fill-N2{fill:#676C7E;}
		.d2-2868454509 .fill-N3{fill:#9499AB;}
		.d2-2868454509 .fill-N4{fill:#CFD2DD;}
		.d2-2868454509 .fill-N5{fill:#DEE1EB;}
		.d2-2868454509 .fill-N6{fill:#EEF1F8;}
		.d2-2868454509 .fill-N7{fill:#FFFFFF;}
		.d2-2868454509 .fill-B1{fill:#0D32B2;}
		.d2-2868454509 .fill-B2{fill:#0D32B2;}
		.d2-2868454509 .fill-B3{fill:#E3E9FD;}
		.d2-2868454509 .fill-B4{fill:#E3E9FD;}
		.d2-2868454509 .fill-B5{fill:#EDF0FD;}
		.d2-2868454509 .fill-B6{fill:#F7F8FE;}
		.d2-2868454509 .fill-AA2{fill:#4A6FF3;}
		.d2-2868454509 .fill-AA4{fill:#EDF0FD;}
		.d2-2868454509 .fill-AA5{fill:#F7F8FE;}
		.d2-2868454509 .fill-AB4{fill:#EDF0FD;}
		.d2-2868454509 .fill-AB5{fill:#F7F8FE;}
		.d2-2868454509 .stroke-N1{stroke:#0A0F25;}
		.d2-2868454509 .stroke-N2{stroke:#676C7E;}
		.d2-2868454509 .stroke-N3{stroke:#9499AB;}
		.d2-2868454509 .stroke-N4{stroke:#CFD2DD;}
		.d2-2868454509 .stroke-N5{stroke:#DEE1EB;}
		.d2-2868454509 .stroke-N6{stroke:#EEF1F8;}
		.d2-2868454509 .stroke-N7{stroke:#FFFFFF;}
		.d2-2868454509 .stroke-B1{stroke:#0D32B2;}
		.d2-2868454509 .stroke-B2{stroke:#0D32B2;}
		.d2-2868454509 .stroke-B3{stroke:#E3E9FD;}
		.d2-2868454509 .stroke-B4{stroke:#E3E9FD;}
		.d2-2868454509 .stroke-B5{stroke:#EDF0FD;}
		.d2-2868454509 .stroke-B6{stroke:#F7F8FE;}
		.d2-2868454509 .stroke-AA2{stroke:#4A6FF3;}
		.d2-2868454509 .stroke-AA4{stroke:#EDF0FD;}
		.d2-2868454509 .stroke-AA5{stroke:#F7F8FE;}
		.d2-2868454509 .stroke-AB4{stroke:#EDF0FD;}
		.d2-2868454509 .stroke-AB5{stroke:#F7F8FE;}
		.d2-2868454509 .background-color-N1{background-color:#0A0F25;}
		.d2-2868454509 .background-color-N2{background-color:#676C7E;}
		.d2-2868454509 .background-color-N3{background-color:#9499AB;}
		.d2-2868454509 .background-color-N4{background-color:#CFD2DD;}
		.d2-2868454509 .background-color-N5{background-color:#DEE1EB;}
		.d2-2868454509 .background-color-N6{background-color:#EEF1F8;}
		.d2-2868454509 .background-color-N7{background-color:#FFFFFF;}
		.d2-2868454509 .background-color-B1{background-color:#0D32B2;}
		.d2-2868454509 .background-color-B2{background-color:#0D32B2;}
		.d2-2868454509 .background-color-B3{background-color:#E3E9FD;}
		.d2-2868454509 .background-color-B4{background-color:#E3E9FD;}
		.d2-2868454509 .background-color-B5{background-color:#EDF0FD;}
		.d2-2868454509 .background-color-B6{background-color:#F7F8FE;}
		.d2-2868454509 .background-color-AA2{background-color:#4A6FF3;}
		.d2-2868454509 .background-color-AA4{background-color:#EDF0FD;}
		.d2-2868454509 .background-color-AA5{background-color:#F7F8FE;}
		.d2-2868454509 .background-color-AB4{background-color:#EDF0FD;}
		.d2-2868454509 .background-color-AB5{background-color:#F7F8FE;}
		.d2-2868454509 .color-N1{color:#0A0F25;}
		.d2-2868454509 .color-N2{color:#676C7E;}
		.d2-2868454509 .color-N3{color:#9499AB;}
		.d2-2868454509 .color-N4{color:#CFD2DD;}
		.d2-2868454509 .color-N5{color:#DEE1EB;}
		.d2-2868454509 .color-N6{color:#EEF1F8;}
		.d2-2868454509 .color-N7{color:#FFFFFF;}
		.d2-2868454509 .color-B1{color:#0D32B2;}
		.d2-2868454509 .color-B2{color:#0D32B2;}
		.d2-2868454509 .color-B3{color:#E3E9FD;}
		.d2-2868454509 .color-B4{color:#E3E9FD;}
		.d2-2868454509 .color-B5{color:#EDF0FD;}
		.d2-2868454509 .color-B6{color:#F7F8FE;}
		.d2-2868454509 .color-AA2{color:#4A6FF3;}
		.d2-2868454509 .color-AA4{color:#EDF0FD;}
		.d2-2868454509 .color-AA5{color:#F7F8FE;}
		.d2-2868454509 .color-AB4{color:#EDF0FD;}
		.d2-2868454509 .color-AB5{color:#F7F8FE;}.appendix text.text{fill:#0A0F25}.md{--color-fg-default:#0A0F25;--color-fg-muted:#676C7E;--color-fg-subtle:#9499AB;--color-canvas-default:#FFFFFF;--color-canvas-subtle:#EEF1F8;--color-border-default:#0D32B2;--color-border-muted:#0D32B2;--color-neutral-muted:#EEF1F8;--color-accent-fg:#0D32B2;--color-accent-emphasis:#0D32B2;--color-attention-subtle:#676C7E;--color-danger-fg:red;}.sketch-overlay-B1{fill:url(#streaks-darker);mix-blend-mode:lighten}.sketch-overlay-B2{fill:url(#streaks-darker);mix-blend-mode:lighten}.sketch-overlay-B3{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-B4{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-B5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-B6{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AA2{fill:url(#streaks-dark);mix-blend-mode:overlay}.sketch-overlay-AA4{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AA5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AB4{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AB5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-N1{fill:url(#streaks-darker);mix-blend-mode:lighten}.sketch-overlay-N2{fill:url(#streaks-dark);mix-blend-mode:overlay}.sketch-overlay-N3{fill:url(#streaks-normal);mix-blend-mode:color-burn}.sketch-overlay-N4{fill:url(#streaks-normal);mix-blend-mode:color-burn}.sketch-overlay-N5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-N6{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-N7{fill:url(#streaks-bright);mix-blend-mode:darken}.light-code{display: block}.dark-code{display: none}]]></style><g id="user"><g class="shape" ><rect x="12.000000" y="52.000000" width="135.000000" height="92.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><image href="https://icons.terrastruct.com/essentials%2F365-user.svg" x="12.000000" y="52.000000" width="46" height="46" /><text x="79.500000" y="103.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">John Doe</text></g><g id="mobile"><g class="shape" ><rect x="187.000000" y="52.000000" width="127.000000" height="92.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><image href="https://icons.terrastruct.com/tech%2F052-smartphone-3.svg" x="187.000000" y="52.000000" width="46" height="46" /><text x="250.500000" y="103.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">Webapp</text></g><g id="browser"><g class="shape" ><rect x="354.000000" y="52.000000" width="118.000000" height="92.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><image href="https://icons.terrastruct.com/tech%2Fbrowser-2.svg" x="354.000000" y="52.000000" width="46" height="46" /><text x="413.000000" y="103.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">Laptop</text></g><g id="portal"><g class="shape" ><rect x="542.000000" y="52.000000" width="111.000000" height="92.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><image href="https://icons.terrastruct.com/azure%2FIntegration%20Service%20Color%2FSoftware%20as%20a%20Service%20%28SaaS%29.svg" x="542.000000" y="52.000000" width="46" height="46" /><text x="597.500000" y="103.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">Portal</text></g><g id="verifier"><g class="shape" ><rect x="693.000000" y="52.000000" width="140.000000" height="92.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><image href="https://icons.terrastruct.com/azure%2FSecurity%20Service%20Color%2FSecurity%20Center.svg" x="693.000000" y="52.000000" width="46" height="46" /><text x="763.000000" y="103.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">VC Verifier</text></g><g id="(user -- )[0]"><path d="M 79.500000 146.000000 L 79.500000 843.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:12.000000,11.838767;" mask="url(#d2-2868454509)" /></g><g id="(mobile -- )[0]"><path d="M 250.500000 146.000000 L 250.500000 843.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:12.000000,11.838767;" mask="url(#d2-2868454509)" /></g><g id="(browser -- )[0]"><path d="M 413.000000 146.000000 L 413.000000 843.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:12.000000,11.838767;" mask="url(#d2-2868454509)" /></g><g id="(portal -- )[0]"><path d="M 597.500000 146.000000 L 597.500000 843.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:12.000000,11.838767;" mask="url(#d2-2868454509)" /></g><g id="(verifier -- )[0]"><path d="M 763.000000 146.000000 L 763.000000 843.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:12.000000,11.838767;" mask="url(#d2-2868454509)" /></g><g id="portal.t"><g class="shape" ><rect x="591.000000" y="274.000000" width="12.000000" height="90.000000" class=" stroke-B1 fill-B4" style="stroke-width:2;" /></g></g><g id="browser.t"><g class="shape" ><rect x="407.000000" y="344.000000" width="12.000000" height="90.000000" class=" stroke-B1 fill-B4" style="stroke-width:2;" /></g></g><g id="verifier.t"><g class="shape" ><rect x="757.000000" y="414.000000" width="12.000000" height="90.000000" class=" stroke-B1 fill-B4" style="stroke-width:2;" /></g></g><g id="mobile.t"><g class="shape" ><rect x="244.000000" y="554.000000" width="12.000000" height="160.000000" class=" stroke-B1 fill-B4" style="stroke-width:2;" /></g></g><g id="(user -&gt; browser)[0]"><marker id="mk-2177206569" markerWidth="10.000000" markerHeight="12.000000" refX="7.000000" refY="6.000000" viewBox="0.000000 0.000000 10.000000 12.000000" orient="auto" markerUnits="userSpaceOnUse"> <polygon points="0.000000,0.000000 10.000000,6.000000 0.000000,12.000000" class="connection fill-B2" stroke-width="2" /> </marker><path d="M 81.500000 214.000000 L 409.000000 214.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:10.000000,9.865639;" marker-end="url(#mk-2177206569)" mask="url(#d2-2868454509)" /><text x="246.000000" y="220.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">(1) Access DOM portal</text></g><g id="(browser -&gt; portal.t)[0]"><marker id="mk-3488378134" markerWidth="10.000000" markerHeight="12.000000" refX="7.000000" refY="6.000000" viewBox="0.000000 0.000000 10.000000 12.000000" orient="auto" markerUnits="userSpaceOnUse"> <polygon points="0.000000,0.000000 10.000000,6.000000 0.000000,12.000000" class="connection fill-B1" stroke-width="2" /> </marker><path d="M 415.000000 284.000000 L 587.500000 284.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-2868454509)" /><text x="502.000000" y="290.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">(1) Access DOM portal</text></g><g id="(portal.t -&gt; browser.t)[0]"><path d="M 589.500000 354.000000 L 423.000000 354.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-2868454509)" /><text x="505.000000" y="360.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">(2) HTTP 302 (redirect)</text></g><g id="(browser.t -&gt; verifier.t)[0]"><path d="M 421.000000 424.000000 L 753.000000 424.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-2868454509)" /><text x="588.500000" y="430.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">(2) Access Login page</text></g><g id="(verifier.t -&gt; browser)[0]"><path d="M 755.000000 494.000000 L 417.000000 494.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-2868454509)" /><text x="585.500000" y="500.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">(3) Display QR code</text></g><g id="(user -&gt; mobile.t)[0]"><path d="M 81.500000 564.000000 L 240.500000 564.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:10.000000,9.865639;" marker-end="url(#mk-2177206569)" mask="url(#d2-2868454509)" /><text x="162.000000" y="570.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">Start QR scan</text></g><g id="(browser -&gt; mobile.t)[0]"><path d="M 411.000000 634.000000 L 260.500000 634.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:10.000000,9.865639;" marker-end="url(#mk-2177206569)" mask="url(#d2-2868454509)" /><text x="334.500000" y="640.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">(4) Scan QR code</text></g><g id="(mobile.t -&gt; verifier)[0]"><path d="M 258.500000 704.000000 L 759.000000 704.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-2868454509)" /><text x="510.000000" y="710.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">(5) GET /authentication-requests</text></g><g id="(verifier -&gt; mobile)[0]"><path d="M 761.000000 774.000000 L 254.500000 774.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-2868454509)" /><text x="506.500000" y="780.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">(5) Reply with Authentication Request</text></g><mask id="d2-2868454509" maskUnits="userSpaceOnUse" x="-89" y="-49" width="1023" height="994">
<rect x="-89" y="-49" width="1023" height="994" fill="white"></rect>
<rect x="176.000000" y="204.000000" width="140" height="21" fill="black"></rect>
<rect x="432.000000" y="274.000000" width="140" height="21" fill="black"></rect>
<rect x="433.000000" y="344.000000" width="144" height="21" fill="black"></rect>
<rect x="519.000000" y="414.000000" width="139" height="21" fill="black"></rect>
<rect x="523.000000" y="484.000000" width="125" height="21" fill="black"></rect>
<rect x="118.000000" y="554.000000" width="88" height="21" fill="black"></rect>
<rect x="280.000000" y="624.000000" width="109" height="21" fill="black"></rect>
<rect x="404.000000" y="694.000000" width="212" height="21" fill="black"></rect>
<rect x="384.000000" y="764.000000" width="245" height="21" fill="black"></rect>
</mask></svg></svg>

            <ul style='list-style: none;'>
                <li style='text-indent: -1em;' id='915.1'><a href='#915.1' class='selfref'><b>1</b></a> The user (GoodAir employee) accesses the DOME portal to perform the onboarding process.
                <li style='text-indent: -1em;' id='921.2'><a href='#921.2' class='selfref'><b>2</b></a> The portal redirects the user to the login page of the Verifier component of DOME Onboarding. The page shows a button labelled âLogin with Verifiable Credentialsâ or something similar.
                <li style='text-indent: -1em;' id='925.3'><a href='#925.3' class='selfref'><b>3</b></a> The Verifier generates and displays a QR code, containing inside the URL of the `/authentication-requests` endpoint of the Verifier component which will be used to start the OIDCVP process.
                <li style='text-indent: -1em;' id='928.4'><a href='#928.4' class='selfref'><b>4</b></a> The user starts the scan with the wallet
                <li style='text-indent: -1em;' id='936.5'><a href='#936.5' class='selfref'><b>5</b></a> After confirmation by the user, the wallet performs a ` GET /authentication-requests` endpoint that was inside the QR code. The reply to the GET request is an Authentication Request
            </ul>
            <p>This starts a Self-Issued OpenID Provider flow [[[OpenID.SIOP2]]], where the Verifier component of the portal plays the role of a Relying Party (RP in Open ID Connect terminology) and the wallet of the user is a Self-Issued IdP. In this step, the Verifier creates a SIOP Authentication Request. As a Self-Issued OP may be running locally as a native application or progressive web application (PWA), the RP may not have a network-addressable endpoint to communicate directly with the OP. We have to leverage the implicit flow of OpenID Connect to communicate with such locally-running Ops, as described in [[[OpenID.SIOP2]]].
            </p>
        </section>


        <section><h2>Authentication Request</h2>

            <p>The Authentication Request travels in the response to the HTTP GET request performed in the previous point, as a JWT signed by the DOME onboarding service, using the eIDAS certificate for seals that corresponds to the legal person operating the service. The decoded contents of the JWT may be:
            </p>

<pre class="nohighlight" style="padding-left:0.5em;background-color: #282a36;"><code><span style="display:flex;"><span><span style="color:#50fa7b">openid://?</span>
</span></span><span style="display:flex;"><span><span style="color:#50fa7b">response_type</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">id_token</span>
</span></span><span style="display:flex;"><span><span style="color:#50fa7b">&amp;response_mode</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">post</span>
</span></span><span style="display:flex;"><span><span style="color:#50fa7b">&amp;client_id</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">did:elsi:VATFR-99999999</span>
</span></span><span style="display:flex;"><span><span style="color:#50fa7b">&amp;redirect_uri</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">https%3A%2F%2Fidp-pdc.fiware.io%2Fsiop_sessions</span>
</span></span><span style="display:flex;"><span><span style="color:#50fa7b">&amp;scope</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">openid%20profile</span>
</span></span><span style="display:flex;"><span><span style="color:#50fa7b">&amp;state</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">af0ifjsldkj</span>
</span></span><span style="display:flex;"><span><span style="color:#50fa7b">&amp;nonce</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">n-0S6_WzA2Mj</span>
</span></span><span style="display:flex;"><span><span style="color:#50fa7b">&amp;registration</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">%7B%22subject_syntax_types_supported%22:%5B%22did%22%5D,
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    %22id_token_signing_alg_values_supported%22:%5B%22RS256%22%5D%7</span>
</span></span></code></pre>
            <p>The most important fields of the Authentication request are explained below.
            </p>

            <dt>response_mode
            </dt>


            <dd>The [[OpenID.SIOP2]] flow uses the response mode <code>post</code> which is used to request the SIOP to perform an HTTP <code>POST</code> request to deliver the result of the authentication process to a certain endpoint. The parameter <code>response_mode</code> is used to carry this value.
            </dd>


            <dt>client_id
            </dt>


            <dd>Contains the DID of the Relying Party, in this case the `did:elsi` identifier of the DOME portal.
            </dd>


            <dt>redirect_uri
            </dt>


            <dd>Contains the endpoint to where the SIOP shall send the the authentication using the HTTP <code>POST</code>.
            </dd>

        </section>


        <section><h2>Verification of the Authentication Request</h2>

            <p>Before sending the Authentication Response, the wallet should verify that the Authentication Request seems correct. The most important verifications are the following:
            </p>
            <ol>
                <li id='list_977.1'>Verification of the signature. As mentioned in the previous section, the Authentication Request is received as a JWT signed by the DOME onboarding service, using the eIDAS certificate for seals that corresponds to the legal person operating the service. This allows the wallet to verify that the signature corresponds to a real-world entity.                </li>
                <li id='list_977.2'>Verification that the DID in the <code>client_id</code> field of the Authentication Request corresponds to the entity that signed the Authentication Request. This is easy in our case because we use the `did:elsi` method.                </li>
                <li id='list_977.3'>Verification that the entity identified in the <code>client_id</code> field of the Authentication Request is a trusted entity belonging to the ecosystem, by resolving the DID of in the <code>client_id</code> field.                <div>
                    <p>The actual mechanism may vary depending on the DID method used and the ecosystem where the client wants to onboard. In the case of DOME, the DOME onboarding service is a well-known entity and it is easy to verify that the DID corresponds to the DOME onboarding service.
                    </p>
                    <p>In the case that the Relying Party is a participant in the ecosystem, we assume that the ecosystem provides a Trusted Participants Registry with an API compatible with the EBSI Trusted Issuers Registry, and that the participants registry is managed in a trusted way by the DOME onboarding service.
                    </p>
                    <p>In this case, to check if the DID is a participant on the DOME ecosystem, the wallet sends a `GET /api/did/v1/identifiers/did:elsi:VATFR-9999999` request to the endpoint of one of several trusted servers implementing the query Trusted Participant Registry functionality. The API returns a JSON document as a DID Document DID Document. The DID Document (as per W3C) contains relevant information about the entity owner of the DID. It contains its Public Key, used to verify the digital signature of the entity. It also contains the status of the entity in the DOME ecosystem. It is extensible and can contain any public information which may be relevant for the use case. The API must be operated by a trusted entity for the user. There may be as many servers implementing the API as needed and operated by different entities. At least one of those trusted entities has to be configured in the wallet of the user.
                    </p>
                </div>
                </li>
            </ol>

        </section>


        <section><h2>Creating and sending the Authentication Response </h2>

<!-- Original D2 diagram definition
    shape: sequence_diagram
    # Definition of the participants
    user: John Doe {
        icon: https://icons.terrastruct.com/essentials%2F365-user.svg
    }
    mobile: Webapp {
        icon: https://icons.terrastruct.com/tech%2F052-smartphone-3.svg
    }
    browser: Laptop {
        icon: https://icons.terrastruct.com/tech%2Fbrowser-2.svg
    }
    portal: Portal {
        icon: https://icons.terrastruct.com/azure%2FIntegration%20Service%20Color%2FSoftware%20as%20a%20Service%20%28SaaS%29.svg
    }
    verifier: VC Verifier {
        icon: https://icons.terrastruct.com/azure%2FSecurity%20Service%20Color%2FSecurity%20Center.svg
    }
    # ==================================================
    # -(5) The wallet receives the Authentication Request in the reply of the GET request.
    verifier -> mobile.t: (5) Reply with Authentication Request
    # -(6) The wallet performs the validations of the Authentication Request described in the previous section.
    mobile.t -> mobile.t: (6) Verify Authentication Request
    # -(7) The wallet creates the Authentication Response.
    mobile.t -> mobile.t: (7) Create Authentication Response
    # -(8) The wallet sends the Authentication Response to the endpoint passed in the `redirect_uri` authentication request parameter using an HTTP `POST` request using `application/x-www-form-urlencoded` encoding. The response contains an ID Token and a Verifiable Presentation (VP) token as defined in [[OpenID.VP]].
    mobile.t -> verifier.t: (8) POST with Authentication Response
 -->

<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" d2Version="v0.4.0-HEAD" preserveAspectRatio="xMinYMin meet" viewBox="0 0 993 644"><svg id="d2-svg" class="d2-1714205226" width="993" height="644" viewBox="-89 -49 993 644"><rect x="-89.000000" y="-49.000000" width="993.000000" height="644.000000" rx="0.000000" class=" fill-N7" stroke-width="0" /><style type="text/css"><![CDATA[
.d2-1714205226 .text {
	font-family: "d2-1714205226-font-regular";
}
@font-face {
	font-family: d2-1714205226-font-regular;
	src: url("data:application/font-woff;base64,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");
}
.d2-1714205226 .text-italic {
	font-family: "d2-1714205226-font-italic";
}
@font-face {
	font-family: d2-1714205226-font-italic;
	src: url("data:application/font-woff;base64,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");
}]]></style><style type="text/css"><![CDATA[.shape {
  shape-rendering: geometricPrecision;
  stroke-linejoin: round;
}
.connection {
  stroke-linecap: round;
  stroke-linejoin: round;
}
.blend {
  mix-blend-mode: multiply;
  opacity: 0.5;
}

		.d2-1714205226 .fill-N1{fill:#0A0F25;}
		.d2-1714205226 .fill-N2{fill:#676C7E;}
		.d2-1714205226 .fill-N3{fill:#9499AB;}
		.d2-1714205226 .fill-N4{fill:#CFD2DD;}
		.d2-1714205226 .fill-N5{fill:#DEE1EB;}
		.d2-1714205226 .fill-N6{fill:#EEF1F8;}
		.d2-1714205226 .fill-N7{fill:#FFFFFF;}
		.d2-1714205226 .fill-B1{fill:#0D32B2;}
		.d2-1714205226 .fill-B2{fill:#0D32B2;}
		.d2-1714205226 .fill-B3{fill:#E3E9FD;}
		.d2-1714205226 .fill-B4{fill:#E3E9FD;}
		.d2-1714205226 .fill-B5{fill:#EDF0FD;}
		.d2-1714205226 .fill-B6{fill:#F7F8FE;}
		.d2-1714205226 .fill-AA2{fill:#4A6FF3;}
		.d2-1714205226 .fill-AA4{fill:#EDF0FD;}
		.d2-1714205226 .fill-AA5{fill:#F7F8FE;}
		.d2-1714205226 .fill-AB4{fill:#EDF0FD;}
		.d2-1714205226 .fill-AB5{fill:#F7F8FE;}
		.d2-1714205226 .stroke-N1{stroke:#0A0F25;}
		.d2-1714205226 .stroke-N2{stroke:#676C7E;}
		.d2-1714205226 .stroke-N3{stroke:#9499AB;}
		.d2-1714205226 .stroke-N4{stroke:#CFD2DD;}
		.d2-1714205226 .stroke-N5{stroke:#DEE1EB;}
		.d2-1714205226 .stroke-N6{stroke:#EEF1F8;}
		.d2-1714205226 .stroke-N7{stroke:#FFFFFF;}
		.d2-1714205226 .stroke-B1{stroke:#0D32B2;}
		.d2-1714205226 .stroke-B2{stroke:#0D32B2;}
		.d2-1714205226 .stroke-B3{stroke:#E3E9FD;}
		.d2-1714205226 .stroke-B4{stroke:#E3E9FD;}
		.d2-1714205226 .stroke-B5{stroke:#EDF0FD;}
		.d2-1714205226 .stroke-B6{stroke:#F7F8FE;}
		.d2-1714205226 .stroke-AA2{stroke:#4A6FF3;}
		.d2-1714205226 .stroke-AA4{stroke:#EDF0FD;}
		.d2-1714205226 .stroke-AA5{stroke:#F7F8FE;}
		.d2-1714205226 .stroke-AB4{stroke:#EDF0FD;}
		.d2-1714205226 .stroke-AB5{stroke:#F7F8FE;}
		.d2-1714205226 .background-color-N1{background-color:#0A0F25;}
		.d2-1714205226 .background-color-N2{background-color:#676C7E;}
		.d2-1714205226 .background-color-N3{background-color:#9499AB;}
		.d2-1714205226 .background-color-N4{background-color:#CFD2DD;}
		.d2-1714205226 .background-color-N5{background-color:#DEE1EB;}
		.d2-1714205226 .background-color-N6{background-color:#EEF1F8;}
		.d2-1714205226 .background-color-N7{background-color:#FFFFFF;}
		.d2-1714205226 .background-color-B1{background-color:#0D32B2;}
		.d2-1714205226 .background-color-B2{background-color:#0D32B2;}
		.d2-1714205226 .background-color-B3{background-color:#E3E9FD;}
		.d2-1714205226 .background-color-B4{background-color:#E3E9FD;}
		.d2-1714205226 .background-color-B5{background-color:#EDF0FD;}
		.d2-1714205226 .background-color-B6{background-color:#F7F8FE;}
		.d2-1714205226 .background-color-AA2{background-color:#4A6FF3;}
		.d2-1714205226 .background-color-AA4{background-color:#EDF0FD;}
		.d2-1714205226 .background-color-AA5{background-color:#F7F8FE;}
		.d2-1714205226 .background-color-AB4{background-color:#EDF0FD;}
		.d2-1714205226 .background-color-AB5{background-color:#F7F8FE;}
		.d2-1714205226 .color-N1{color:#0A0F25;}
		.d2-1714205226 .color-N2{color:#676C7E;}
		.d2-1714205226 .color-N3{color:#9499AB;}
		.d2-1714205226 .color-N4{color:#CFD2DD;}
		.d2-1714205226 .color-N5{color:#DEE1EB;}
		.d2-1714205226 .color-N6{color:#EEF1F8;}
		.d2-1714205226 .color-N7{color:#FFFFFF;}
		.d2-1714205226 .color-B1{color:#0D32B2;}
		.d2-1714205226 .color-B2{color:#0D32B2;}
		.d2-1714205226 .color-B3{color:#E3E9FD;}
		.d2-1714205226 .color-B4{color:#E3E9FD;}
		.d2-1714205226 .color-B5{color:#EDF0FD;}
		.d2-1714205226 .color-B6{color:#F7F8FE;}
		.d2-1714205226 .color-AA2{color:#4A6FF3;}
		.d2-1714205226 .color-AA4{color:#EDF0FD;}
		.d2-1714205226 .color-AA5{color:#F7F8FE;}
		.d2-1714205226 .color-AB4{color:#EDF0FD;}
		.d2-1714205226 .color-AB5{color:#F7F8FE;}.appendix text.text{fill:#0A0F25}.md{--color-fg-default:#0A0F25;--color-fg-muted:#676C7E;--color-fg-subtle:#9499AB;--color-canvas-default:#FFFFFF;--color-canvas-subtle:#EEF1F8;--color-border-default:#0D32B2;--color-border-muted:#0D32B2;--color-neutral-muted:#EEF1F8;--color-accent-fg:#0D32B2;--color-accent-emphasis:#0D32B2;--color-attention-subtle:#676C7E;--color-danger-fg:red;}.sketch-overlay-B1{fill:url(#streaks-darker);mix-blend-mode:lighten}.sketch-overlay-B2{fill:url(#streaks-darker);mix-blend-mode:lighten}.sketch-overlay-B3{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-B4{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-B5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-B6{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AA2{fill:url(#streaks-dark);mix-blend-mode:overlay}.sketch-overlay-AA4{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AA5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AB4{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AB5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-N1{fill:url(#streaks-darker);mix-blend-mode:lighten}.sketch-overlay-N2{fill:url(#streaks-dark);mix-blend-mode:overlay}.sketch-overlay-N3{fill:url(#streaks-normal);mix-blend-mode:color-burn}.sketch-overlay-N4{fill:url(#streaks-normal);mix-blend-mode:color-burn}.sketch-overlay-N5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-N6{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-N7{fill:url(#streaks-bright);mix-blend-mode:darken}.light-code{display: block}.dark-code{display: none}]]></style><g id="user"><g class="shape" ><rect x="12.000000" y="52.000000" width="135.000000" height="92.000000" class=" stroke-B1 fill-N7" style="stroke-width:2;" /></g><image href="https://icons.terrastruct.com/essentials%2F365-user.svg" x="12.000000" y="52.000000" width="46" height="46" /><text x="79.500000" y="103.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">John Doe</text></g><g id="mobile"><g class="shape" ><rect x="187.000000" y="52.000000" width="127.000000" height="92.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><image href="https://icons.terrastruct.com/tech%2F052-smartphone-3.svg" x="187.000000" y="52.000000" width="46" height="46" /><text x="250.500000" y="103.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">Webapp</text></g><g id="browser"><g class="shape" ><rect x="354.000000" y="52.000000" width="118.000000" height="92.000000" class=" stroke-B1 fill-N7" style="stroke-width:2;" /></g><image href="https://icons.terrastruct.com/tech%2Fbrowser-2.svg" x="354.000000" y="52.000000" width="46" height="46" /><text x="413.000000" y="103.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">Laptop</text></g><g id="portal"><g class="shape" ><rect x="512.000000" y="52.000000" width="111.000000" height="92.000000" class=" stroke-B1 fill-N7" style="stroke-width:2;" /></g><image href="https://icons.terrastruct.com/azure%2FIntegration%20Service%20Color%2FSoftware%20as%20a%20Service%20%28SaaS%29.svg" x="512.000000" y="52.000000" width="46" height="46" /><text x="567.500000" y="103.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">Portal</text></g><g id="verifier"><g class="shape" ><rect x="663.000000" y="52.000000" width="140.000000" height="92.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><image href="https://icons.terrastruct.com/azure%2FSecurity%20Service%20Color%2FSecurity%20Center.svg" x="663.000000" y="52.000000" width="46" height="46" /><text x="733.000000" y="103.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">VC Verifier</text></g><g id="(user -- )[0]"><path d="M 79.500000 146.000000 L 79.500000 493.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:12.000000,11.838767;" mask="url(#d2-1714205226)" /></g><g id="(mobile -- )[0]"><path d="M 250.500000 146.000000 L 250.500000 493.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:12.000000,11.838767;" mask="url(#d2-1714205226)" /></g><g id="(browser -- )[0]"><path d="M 413.000000 146.000000 L 413.000000 493.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:12.000000,11.838767;" mask="url(#d2-1714205226)" /></g><g id="(portal -- )[0]"><path d="M 567.500000 146.000000 L 567.500000 493.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:12.000000,11.838767;" mask="url(#d2-1714205226)" /></g><g id="(verifier -- )[0]"><path d="M 733.000000 146.000000 L 733.000000 493.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:12.000000,11.838767;" mask="url(#d2-1714205226)" /></g><g id="mobile.t"><g class="shape" ><rect x="244.000000" y="204.000000" width="12.000000" height="230.000000" class=" stroke-B1 fill-B4" style="stroke-width:2;" /></g></g><g id="verifier.t"><g class="shape" ><rect x="727.000000" y="414.000000" width="12.000000" height="30.000000" class=" stroke-B1 fill-B4" style="stroke-width:2;" /></g></g><g id="(verifier -&gt; mobile.t)[0]"><marker id="mk-3488378134" markerWidth="10.000000" markerHeight="12.000000" refX="7.000000" refY="6.000000" viewBox="0.000000 0.000000 10.000000 12.000000" orient="auto" markerUnits="userSpaceOnUse"> <polygon points="0.000000,0.000000 10.000000,6.000000 0.000000,12.000000" class="connection fill-B1" stroke-width="2" /> </marker><path d="M 731.000000 214.000000 L 260.500000 214.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-1714205226)" /><text x="494.500000" y="220.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">(5) Reply with Authentication Request</text></g><g id="mobile.(t -&gt; t)[0]"><path d="M 258.500000 284.000000 L 320.500000 284.000000 S 330.500000 284.000000 330.500000 294.000000 L 330.500000 319.000000 S 330.500000 329.000000 320.500000 329.000000 L 260.500000 329.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-1714205226)" /><text x="330.500000" y="312.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">(6) Verify Authentication Request</text></g><g id="mobile.(t -&gt; t)[1]"><path d="M 258.500000 354.000000 L 320.500000 354.000000 S 330.500000 354.000000 330.500000 364.000000 L 330.500000 389.000000 S 330.500000 399.000000 320.500000 399.000000 L 260.500000 399.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-1714205226)" /><text x="330.500000" y="382.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">(7) Create Authentication Response</text></g><g id="(mobile.t -&gt; verifier.t)[0]"><path d="M 258.500000 424.000000 L 723.000000 424.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-1714205226)" /><text x="492.000000" y="430.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">(8) POST with Authentication Response</text></g><mask id="d2-1714205226" maskUnits="userSpaceOnUse" x="-89" y="-49" width="993" height="644">
<rect x="-89" y="-49" width="993" height="644" fill="white"></rect>
<rect x="372.000000" y="204.000000" width="245" height="21" fill="black"></rect>
<rect x="224.000000" y="296.000000" width="213" height="21" fill="black"></rect>
<rect x="216.000000" y="366.000000" width="229" height="21" fill="black"></rect>
<rect x="366.000000" y="414.000000" width="252" height="21" fill="black"></rect>
</mask></svg></svg>

            <ul style='list-style: none;'>
                <li style='text-indent: -1em;' id='1012.5'><a href='#1012.5' class='selfref'><b>5</b></a> The wallet receives the Authentication Request in the reply of the GET request.
                <li style='text-indent: -1em;' id='1015.6'><a href='#1015.6' class='selfref'><b>6</b></a> The wallet performs the validations of the Authentication Request described in the previous section.
                <li style='text-indent: -1em;' id='1018.7'><a href='#1018.7' class='selfref'><b>7</b></a> The wallet creates the Authentication Response.
                <li style='text-indent: -1em;' id='1021.8'><a href='#1021.8' class='selfref'><b>8</b></a> The wallet sends the Authentication Response to the endpoint passed in the `redirect_uri` authentication request parameter using an HTTP `POST` request using `application/x-www-form-urlencoded` encoding. The response contains an ID Token and a Verifiable Presentation (VP) token as defined in [[OpenID.VP]].
            </ul>

            <section><h2>The Authentication Response</h2>

                <p>The example Authentication Response is described below.
                </p>

<pre class="nohighlight" style="padding-left:0.5em;background-color: #282a36;"><code><span style="display:flex;"><span><span style="color:#50fa7b">POST</span> /siop_sessions <span style="color:#ff79c6">HTTP</span><span style="color:#ff79c6">/</span><span style="color:#bd93f9">1.1</span>
</span></span><span style="display:flex;"><span>Host<span style="color:#ff79c6">:</span> client.example.com
</span></span><span style="display:flex;"><span>Content-Type<span style="color:#ff79c6">:</span> application/x-www-form-urlencoded
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>id_token=eyJ0NiJ... I6IjIifX0.DeWt4QuZXso
</span></span><span style="display:flex;"><span>&amp;vp_token=eyJhbGciOiJIUz....I1NiIsInR5cCadQssw5c
</span></span><span style="display:flex;"><span>&amp;state=af0ifjsldkj
</span></span></code></pre>
                <p>The decoded <code>id_token</code> would be:
                </p>

<pre class="nohighlight" style="padding-left:0.5em;background-color: #282a36;"><code><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;iss&#34;</span>: <span style="color:#f1fa8c">&#34;https://self-issued.me/v2&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;aud&#34;</span>: <span style="color:#f1fa8c">&#34;did:elsi:VATFR:99999999&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;iat&#34;</span>: <span style="color:#bd93f9">1615910538</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;exp&#34;</span>: <span style="color:#bd93f9">1615911138</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;sub&#34;</span>: <span style="color:#f1fa8c">&#34;did:key:99ab5bca41bb45b78d242a46f0157b7d&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;auth_time&#34;</span>: <span style="color:#bd93f9">1615910535</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;nonce&#34;</span>: <span style="color:#f1fa8c">&#34;n-0S6_WzA2Mj&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre>
                <p>The sub claim is `did:key:99ab5bca41bb45b78d242a46f0157b7d` which is the DID of the user and that is not registered in any Verifiable Data Registry. It must be the same as the DID included in the LEARCredential that was issued by the GoodAir company to its employee and which travels in the authentication response.
                </p>
                <p>The <code>vp_token</code> includes the Verifiable Presentation, which can be in two formats: <code>jwt_vp</code> (JWT encoded) or <code>ldp_vp</code> (JSON-LD encoded). The following example is using the JWT encoding:
                </p>

<pre class="nohighlight" style="padding-left:0.5em;background-color: #282a36;"><code><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;format&#34;</span>:<span style="color:#f1fa8c">&#34;jwt_vp&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;presentation&#34;</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f1fa8c">&#34;eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImRpZDpleGFtcGxlOmFiZmUxM2Y3MTIxMjA0
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    MzFjMjc2ZTEyZWNhYiNrZXlzLTEifQ.eyJzdWIiOiJkaWQ6ZXhhbXBsZTplYmZlYjFmNzEyZWJjNmYxY
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    zI3NmUxMmVjMjEiLCJqdGkiOiJodHRwOi8vZXhhbXBsZS5lZHUvY3JlZGVudGlhbHMvMzczMiIsImlzc
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    yI6Imh0dHBzOi8vZXhhbXBsZS5jb20va2V5cy9mb28uandrIiwibmJmIjoxNTQxNDkzNzI0LCJpYXQiO
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    jE1NDE0OTM3MjQsImV4cCI6MTU3MzAyOTcyMywibm9uY2UiOiI2NjAhNjM0NUZTZXIiLCJ2YyI6eyJAY
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    29udGV4dCI6WyJodHRwczovL3d3dy53My5vcmcvMjAxOC9jcmVkZW50aWFscy92MSIsImh0dHBzOi8vd
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    3d3LnczLm9yZy8yMDE4L2NyZWRlbnRpYWxzL2V4YW1wbGVzL3YxIl0sInR5cGUiOlsiVmVyaWZpYWJsZ
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    UNyZWRlbnRpYWwiLCJVbml2ZXJzaXR5RGVncmVlQ3JlZGVudGlhbCJdLCJjcmVkZW50aWFsU3ViamVjd
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    CI6eyJkZWdyZWUiOnsidHlwZSI6IkJhY2hlbG9yRGVncmVlIiwibmFtZSI6IjxzcGFuIGxhbmc9J2ZyL
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    UNBJz5CYWNjYWxhdXLDqWF0IGVuIG11c2lxdWVzIG51bcOpcmlxdWVzPC9zcGFuPiJ9fX19.KLJo5GAy
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    BND3LDTn9H7FQokEsUEi8jKwXhGvoN3JtRa51xrNDgXDb0cq1UTYB-rK4Ft9YVmR1NI_ZOF8oGc_7wAp
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    8PHbF2HaWodQIoOBxxT-4WNqAxft7ET6lkH-4S6Ux3rSGAmczMohEEf8eCeN-jC8WekdPl6zKZQj0YPB
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    1rx6X0-xlFBs7cl6Wt8rfBP_tZ9YgVWrQmUWypSioc0MUyiphmyEbLZagTyPlUyflGlEdqrZAv6eSe6R
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    txJy6M1-lD7a5HTzanYTWBPAUHDZGyGKXdJw-W_x0IWChBzI8t3kpG253fg6V3tPgHeKXE94fz_QpYfg
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    --7kLsyBAfQGbg&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre>
                <p>Which decoded is a Verifiable Presentation including the LEARCredential, described in a previous section but repeated here for clarity of exposition:
                </p>

<pre class="nohighlight" style="padding-left:0.5em;background-color: #282a36;"><code><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;@context&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#f1fa8c">&#34;https://www.w3.org/2018/credentials/v1&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f1fa8c">&#34;https://www.dome-project.com/2022/credentials/learcredential/v1&#34;</span>
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;id&#34;</span>: <span style="color:#f1fa8c">&#34;urn:did:elsi:25159389-8dd17b796ac0&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;type&#34;</span>: [<span style="color:#f1fa8c">&#34;VerifiableCredential&#34;</span>, <span style="color:#f1fa8c">&#34;LEARCredential&#34;</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;issuer&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;id&#34;</span>: <span style="color:#f1fa8c">&#34;did:elsi:VATES-12345678&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;issuanceDate&#34;</span>: <span style="color:#f1fa8c">&#34;2022-03-22T14:00:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;validFrom&#34;</span>: <span style="color:#f1fa8c">&#34;2022-03-22T14:00:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;expirationDate&#34;</span>: <span style="color:#f1fa8c">&#34;2023-03-22T14:00:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;credentialSubject&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;id&#34;</span>: <span style="color:#f1fa8c">&#34;did:key:99ab5bca41bb45b78d242a46f0157b7d&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;title&#34;</span>: <span style="color:#f1fa8c">&#34;Mr.&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;first_name&#34;</span>: <span style="color:#f1fa8c">&#34;John&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;last_name&#34;</span>: <span style="color:#f1fa8c">&#34;Doe&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;gender&#34;</span>: <span style="color:#f1fa8c">&#34;M&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;postal_address&#34;</span>: <span style="color:#f1fa8c">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;email&#34;</span>: <span style="color:#f1fa8c">&#34;johndoe@goodair.com&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;telephone&#34;</span>: <span style="color:#f1fa8c">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;fax&#34;</span>: <span style="color:#f1fa8c">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;mobile_phone&#34;</span>: <span style="color:#f1fa8c">&#34;+34787426623&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;legalRepresentative&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;cn&#34;</span>: <span style="color:#f1fa8c">&#34;56565656V Jesus Ruiz&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;serialNumber&#34;</span>: <span style="color:#f1fa8c">&#34;56565656V&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;organizationIdentifier&#34;</span>: <span style="color:#f1fa8c">&#34;VATES-12345678&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;o&#34;</span>: <span style="color:#f1fa8c">&#34;GoodAir&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;c&#34;</span>: <span style="color:#f1fa8c">&#34;ES&#34;</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;rolesAndDuties&#34;</span>: [
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#ff79c6">&#34;type&#34;</span>: <span style="color:#f1fa8c">&#34;LEARCredential&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#ff79c6">&#34;id&#34;</span>: <span style="color:#f1fa8c">&#34;https://www.dome-project.com/lear/v1/6484994n4r9e990494&#34;</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        ]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre>
            </section>

        </section>


        <section><h2>Authenticating the user with the LEARCredential</h2>

<!-- Original D2 diagram definition
    shape: sequence_diagram
    # Definition of the participants
    user: John Doe {
        icon: https://icons.terrastruct.com/essentials%2F365-user.svg
    }
    mobile: Webapp {
        icon: https://icons.terrastruct.com/tech%2F052-smartphone-3.svg
    }
    browser: Laptop {
        icon: https://icons.terrastruct.com/tech%2Fbrowser-2.svg
    }
    portal: Portal {
        icon: https://icons.terrastruct.com/azure%2FIntegration%20Service%20Color%2FSoftware%20as%20a%20Service%20%28SaaS%29.svg
    }
    verifier: VC Verifier {
        icon: https://icons.terrastruct.com/azure%2FSecurity%20Service%20Color%2FSecurity%20Center.svg
    }
    # ==================================================
    # -(8) The wallet sends the Authentication Response to the endpoint passed in the `redirect_uri` authentication request parameter using an HTTP `POST` request using `application/x-www-form-urlencoded` encoding. The response contains an ID Token and a Verifiable Presentation (VP) token as defined in [[OpenID.VP]].
    mobile.t -> verifier.t: (8) POST with Authentication Response
    # -(9) The Relying Party verifies the Authentication Response with the information received inside the LEARCredential
    verifier.t -> verifier.t: (9) Verify Authentication Response
 -->

<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" d2Version="v0.4.0-HEAD" preserveAspectRatio="xMinYMin meet" viewBox="0 0 1113 549"><svg id="d2-svg" class="d2-3113061900" width="1113" height="549" viewBox="-89 -49 1113 549"><rect x="-89.000000" y="-49.000000" width="1113.000000" height="549.000000" rx="0.000000" class=" fill-N7" stroke-width="0" /><style type="text/css"><![CDATA[
.d2-3113061900 .text {
	font-family: "d2-3113061900-font-regular";
}
@font-face {
	font-family: d2-3113061900-font-regular;
	src: url("data:application/font-woff;base64,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");
}
.d2-3113061900 .text-italic {
	font-family: "d2-3113061900-font-italic";
}
@font-face {
	font-family: d2-3113061900-font-italic;
	src: url("data:application/font-woff;base64,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");
}]]></style><style type="text/css"><![CDATA[.shape {
  shape-rendering: geometricPrecision;
  stroke-linejoin: round;
}
.connection {
  stroke-linecap: round;
  stroke-linejoin: round;
}
.blend {
  mix-blend-mode: multiply;
  opacity: 0.5;
}

		.d2-3113061900 .fill-N1{fill:#0A0F25;}
		.d2-3113061900 .fill-N2{fill:#676C7E;}
		.d2-3113061900 .fill-N3{fill:#9499AB;}
		.d2-3113061900 .fill-N4{fill:#CFD2DD;}
		.d2-3113061900 .fill-N5{fill:#DEE1EB;}
		.d2-3113061900 .fill-N6{fill:#EEF1F8;}
		.d2-3113061900 .fill-N7{fill:#FFFFFF;}
		.d2-3113061900 .fill-B1{fill:#0D32B2;}
		.d2-3113061900 .fill-B2{fill:#0D32B2;}
		.d2-3113061900 .fill-B3{fill:#E3E9FD;}
		.d2-3113061900 .fill-B4{fill:#E3E9FD;}
		.d2-3113061900 .fill-B5{fill:#EDF0FD;}
		.d2-3113061900 .fill-B6{fill:#F7F8FE;}
		.d2-3113061900 .fill-AA2{fill:#4A6FF3;}
		.d2-3113061900 .fill-AA4{fill:#EDF0FD;}
		.d2-3113061900 .fill-AA5{fill:#F7F8FE;}
		.d2-3113061900 .fill-AB4{fill:#EDF0FD;}
		.d2-3113061900 .fill-AB5{fill:#F7F8FE;}
		.d2-3113061900 .stroke-N1{stroke:#0A0F25;}
		.d2-3113061900 .stroke-N2{stroke:#676C7E;}
		.d2-3113061900 .stroke-N3{stroke:#9499AB;}
		.d2-3113061900 .stroke-N4{stroke:#CFD2DD;}
		.d2-3113061900 .stroke-N5{stroke:#DEE1EB;}
		.d2-3113061900 .stroke-N6{stroke:#EEF1F8;}
		.d2-3113061900 .stroke-N7{stroke:#FFFFFF;}
		.d2-3113061900 .stroke-B1{stroke:#0D32B2;}
		.d2-3113061900 .stroke-B2{stroke:#0D32B2;}
		.d2-3113061900 .stroke-B3{stroke:#E3E9FD;}
		.d2-3113061900 .stroke-B4{stroke:#E3E9FD;}
		.d2-3113061900 .stroke-B5{stroke:#EDF0FD;}
		.d2-3113061900 .stroke-B6{stroke:#F7F8FE;}
		.d2-3113061900 .stroke-AA2{stroke:#4A6FF3;}
		.d2-3113061900 .stroke-AA4{stroke:#EDF0FD;}
		.d2-3113061900 .stroke-AA5{stroke:#F7F8FE;}
		.d2-3113061900 .stroke-AB4{stroke:#EDF0FD;}
		.d2-3113061900 .stroke-AB5{stroke:#F7F8FE;}
		.d2-3113061900 .background-color-N1{background-color:#0A0F25;}
		.d2-3113061900 .background-color-N2{background-color:#676C7E;}
		.d2-3113061900 .background-color-N3{background-color:#9499AB;}
		.d2-3113061900 .background-color-N4{background-color:#CFD2DD;}
		.d2-3113061900 .background-color-N5{background-color:#DEE1EB;}
		.d2-3113061900 .background-color-N6{background-color:#EEF1F8;}
		.d2-3113061900 .background-color-N7{background-color:#FFFFFF;}
		.d2-3113061900 .background-color-B1{background-color:#0D32B2;}
		.d2-3113061900 .background-color-B2{background-color:#0D32B2;}
		.d2-3113061900 .background-color-B3{background-color:#E3E9FD;}
		.d2-3113061900 .background-color-B4{background-color:#E3E9FD;}
		.d2-3113061900 .background-color-B5{background-color:#EDF0FD;}
		.d2-3113061900 .background-color-B6{background-color:#F7F8FE;}
		.d2-3113061900 .background-color-AA2{background-color:#4A6FF3;}
		.d2-3113061900 .background-color-AA4{background-color:#EDF0FD;}
		.d2-3113061900 .background-color-AA5{background-color:#F7F8FE;}
		.d2-3113061900 .background-color-AB4{background-color:#EDF0FD;}
		.d2-3113061900 .background-color-AB5{background-color:#F7F8FE;}
		.d2-3113061900 .color-N1{color:#0A0F25;}
		.d2-3113061900 .color-N2{color:#676C7E;}
		.d2-3113061900 .color-N3{color:#9499AB;}
		.d2-3113061900 .color-N4{color:#CFD2DD;}
		.d2-3113061900 .color-N5{color:#DEE1EB;}
		.d2-3113061900 .color-N6{color:#EEF1F8;}
		.d2-3113061900 .color-N7{color:#FFFFFF;}
		.d2-3113061900 .color-B1{color:#0D32B2;}
		.d2-3113061900 .color-B2{color:#0D32B2;}
		.d2-3113061900 .color-B3{color:#E3E9FD;}
		.d2-3113061900 .color-B4{color:#E3E9FD;}
		.d2-3113061900 .color-B5{color:#EDF0FD;}
		.d2-3113061900 .color-B6{color:#F7F8FE;}
		.d2-3113061900 .color-AA2{color:#4A6FF3;}
		.d2-3113061900 .color-AA4{color:#EDF0FD;}
		.d2-3113061900 .color-AA5{color:#F7F8FE;}
		.d2-3113061900 .color-AB4{color:#EDF0FD;}
		.d2-3113061900 .color-AB5{color:#F7F8FE;}.appendix text.text{fill:#0A0F25}.md{--color-fg-default:#0A0F25;--color-fg-muted:#676C7E;--color-fg-subtle:#9499AB;--color-canvas-default:#FFFFFF;--color-canvas-subtle:#EEF1F8;--color-border-default:#0D32B2;--color-border-muted:#0D32B2;--color-neutral-muted:#EEF1F8;--color-accent-fg:#0D32B2;--color-accent-emphasis:#0D32B2;--color-attention-subtle:#676C7E;--color-danger-fg:red;}.sketch-overlay-B1{fill:url(#streaks-darker);mix-blend-mode:lighten}.sketch-overlay-B2{fill:url(#streaks-darker);mix-blend-mode:lighten}.sketch-overlay-B3{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-B4{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-B5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-B6{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AA2{fill:url(#streaks-dark);mix-blend-mode:overlay}.sketch-overlay-AA4{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AA5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AB4{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AB5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-N1{fill:url(#streaks-darker);mix-blend-mode:lighten}.sketch-overlay-N2{fill:url(#streaks-dark);mix-blend-mode:overlay}.sketch-overlay-N3{fill:url(#streaks-normal);mix-blend-mode:color-burn}.sketch-overlay-N4{fill:url(#streaks-normal);mix-blend-mode:color-burn}.sketch-overlay-N5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-N6{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-N7{fill:url(#streaks-bright);mix-blend-mode:darken}.light-code{display: block}.dark-code{display: none}]]></style><g id="user"><g class="shape" ><rect x="12.000000" y="52.000000" width="135.000000" height="92.000000" class=" stroke-B1 fill-N7" style="stroke-width:2;" /></g><image href="https://icons.terrastruct.com/essentials%2F365-user.svg" x="12.000000" y="52.000000" width="46" height="46" /><text x="79.500000" y="103.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">John Doe</text></g><g id="mobile"><g class="shape" ><rect x="187.000000" y="52.000000" width="127.000000" height="92.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><image href="https://icons.terrastruct.com/tech%2F052-smartphone-3.svg" x="187.000000" y="52.000000" width="46" height="46" /><text x="250.500000" y="103.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">Webapp</text></g><g id="browser"><g class="shape" ><rect x="354.000000" y="52.000000" width="118.000000" height="92.000000" class=" stroke-B1 fill-N7" style="stroke-width:2;" /></g><image href="https://icons.terrastruct.com/tech%2Fbrowser-2.svg" x="354.000000" y="52.000000" width="46" height="46" /><text x="413.000000" y="103.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">Laptop</text></g><g id="portal"><g class="shape" ><rect x="512.000000" y="52.000000" width="111.000000" height="92.000000" class=" stroke-B1 fill-N7" style="stroke-width:2;" /></g><image href="https://icons.terrastruct.com/azure%2FIntegration%20Service%20Color%2FSoftware%20as%20a%20Service%20%28SaaS%29.svg" x="512.000000" y="52.000000" width="46" height="46" /><text x="567.500000" y="103.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">Portal</text></g><g id="verifier"><g class="shape" ><rect x="663.000000" y="52.000000" width="140.000000" height="92.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><image href="https://icons.terrastruct.com/azure%2FSecurity%20Service%20Color%2FSecurity%20Center.svg" x="663.000000" y="52.000000" width="46" height="46" /><text x="733.000000" y="103.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">VC Verifier</text></g><g id="(user -- )[0]"><path d="M 79.500000 146.000000 L 79.500000 398.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:12.000000,11.838767;" mask="url(#d2-3113061900)" /></g><g id="(mobile -- )[0]"><path d="M 250.500000 146.000000 L 250.500000 398.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:12.000000,11.838767;" mask="url(#d2-3113061900)" /></g><g id="(browser -- )[0]"><path d="M 413.000000 146.000000 L 413.000000 398.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:12.000000,11.838767;" mask="url(#d2-3113061900)" /></g><g id="(portal -- )[0]"><path d="M 567.500000 146.000000 L 567.500000 398.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:12.000000,11.838767;" mask="url(#d2-3113061900)" /></g><g id="(verifier -- )[0]"><path d="M 733.000000 146.000000 L 733.000000 398.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:12.000000,11.838767;" mask="url(#d2-3113061900)" /></g><g id="mobile.t"><g class="shape" ><rect x="244.000000" y="204.000000" width="12.000000" height="30.000000" class=" stroke-B1 fill-B4" style="stroke-width:2;" /></g></g><g id="verifier.t"><g class="shape" ><rect x="727.000000" y="204.000000" width="12.000000" height="135.000000" class=" stroke-B1 fill-B4" style="stroke-width:2;" /></g></g><g id="(mobile.t -&gt; verifier.t)[0]"><marker id="mk-3488378134" markerWidth="10.000000" markerHeight="12.000000" refX="7.000000" refY="6.000000" viewBox="0.000000 0.000000 10.000000 12.000000" orient="auto" markerUnits="userSpaceOnUse"> <polygon points="0.000000,0.000000 10.000000,6.000000 0.000000,12.000000" class="connection fill-B1" stroke-width="2" /> </marker><path d="M 258.500000 214.000000 L 723.000000 214.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-3113061900)" /><text x="492.000000" y="220.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">(8) POST with Authentication Response</text></g><g id="verifier.(t -&gt; t)[0]"><path d="M 741.000000 284.000000 L 803.000000 284.000000 S 813.000000 284.000000 813.000000 294.000000 L 813.000000 319.000000 S 813.000000 329.000000 803.000000 329.000000 L 743.000000 329.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-3113061900)" /><text x="813.000000" y="312.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">(9) Verify Authentication Response</text></g><mask id="d2-3113061900" maskUnits="userSpaceOnUse" x="-89" y="-49" width="1113" height="549">
<rect x="-89" y="-49" width="1113" height="549" fill="white"></rect>
<rect x="366.000000" y="204.000000" width="252" height="21" fill="black"></rect>
<rect x="702.000000" y="296.000000" width="222" height="21" fill="black"></rect>
</mask></svg></svg>

            <ul style='list-style: none;'>
                <li style='text-indent: -1em;' id='1144.8'><a href='#1144.8' class='selfref'><b>8</b></a> The wallet sends the Authentication Response to the endpoint passed in the `redirect_uri` authentication request parameter using an HTTP `POST` request using `application/x-www-form-urlencoded` encoding. The response contains an ID Token and a Verifiable Presentation (VP) token as defined in [[OpenID.VP]].
                <li style='text-indent: -1em;' id='1147.9'><a href='#1147.9' class='selfref'><b>9</b></a> The Relying Party verifies the Authentication Response with the information received inside the LEARCredential
            </ul>
            <p>The verifications the Relying Party does are:
            </p>
            <ul>
                <li id='list_1153.1'>Verify the signature of the Presentation Request                </li>
            </ul>

            <p>Packet Delivery company uses its own blockchain node implementing the Universal Resolver functionality to resolve the DID of Happy Pets, which is inside the Verifiable Credential received in the Verifiable Presentation. This DID can be found in the âissuerâ field of the âverifiableCredentialâ structure above.
            </p>
            <p>Resolution is performed sending a GET request to the Universal Resolver: /api/did/v1/identifiers/
            did:elsi:EU.EORI.NLHAPPYPETS
            </p>
            <p>Packet Delivery could use a Universal Resolver operated by a different entity, but this would reduce the level of trust compared to using its own server directly connected to the blockchain network.
            Packet Delivery receives the DID Document of Happy Pets with trusted information about the company, including the Public Key associated to the Private Key that Happy Pets used to digitally sign the Verifiable Credential that the customer has just sent inside a Verifiable Presentation as part of the authentication flow. Using the Public Key and the DID inside the DID Document, it can verify the signature of the Verifiable Credential and that Happy Pets is a trusted entity in the ecosystem.
            The above is just for verification of the Verifiable Credential. In addition, Packet Delivery company can also verify that the Verifiable Presentation including the Verifiable Credential is sent by the customer and not by a malicious agent. To do so, it uses the Public Key of the customer in the âverificationMethodâ of the âcredentialSubjectâ structure. That public key is cryptographically bound to the customer DID during the onboarding process that Happy Pets performed with the customer.
            Once all verifications have been performed, Packet Delivery company creates an Access Token for the customer so she can use it to access services in Packet Delivery company in the future.
            The wallet (SIOP) receives a successful reply to the POST request.
            The Packet Delivery company proxy notifies the Packet Delivery portal that the customer is successfully authenticated, and the portal can display the services available to that customer. The browser of the user receives the Access Token created by Packet Delivery to enable it to request services without going through the previous authentication process. The Access Token is a standard OAuth access token that includes the information that Packet Delivery requires for accessing its services.
            At this point the Happy Pets customer is logged in on the Packet Delivery company portal/app and is presented with the possible services provided, including the option to change the PTA of its delivery orders.
            At this moment, the Packet Delivery company knows the following:
            Happy Pets is a participant in the Data Space and that it is a Trusted Issuer of EmployeeCredentials because this info is in the DID Document retrieved in step 13. Maintenance of this information is performed by the Trusted Anchor entity(or entities) managing the Trusted Participants List and Trusted Issuers List.
            Happy Pets says that the user is a customer. This info is inside the Verifiable Credential that is digitally signed by Happy Pets. 
            The category of the customer (and associated policies) with regards to the services offered by Packet Delivery company. This information is also in the Verifiable Credential presented by the customer.
            The Happy Pets customer is presented with the possible services provided by Packet Delivery, including the option to change the PTA of its delivery orders.
            Happy Pets customer searches for his packet delivery order and is presented its details. He now requests a change of the PTA of this order on the Packet Delivery company portal/app.
            Packet Delivery company portal/app sends a request to Packet Delivery company proxy, in order to change the PTA of the delivery order. The request contains the Access Token generated in step 15, with information about the authorisation registry to retrieve policies from.
            </p>
            <p>> Authorization: Bearer IIeD...NIQ   // Bearer JWT
            > Content-Type: application/json
            </p>
            <p>PATCH https://umbrella.fiware.io/ngsi-ld/v1/entities/urn:ngsi-ld:DELIVERYORDER:001/attrs/pta
            </p>
            <p>> Payload
            {
            "value": "<new PTA>",
            "type": "Property"
            }
            </p>
            <p>Decoded Bearer JWT payload:
            {
            "iss": "EU.EORI.NLHAPPYPETS",  // Issuer: Happy Pets
            "sub": "419404e1-07ce-4d80-9e8a-eca94vde0003de", // Customer pseudonym
            "jti": "d8a7fd7465754a4a9117ee28f5b7fb60",
            "iat": 1591966224,
            "exp": 1591966254,
            "aud": "EU.EORI.NLHAPPYPETS",
            "authorisationRegistry": {  // AR to retrieve policies from
            "url": "https://ar.packetdelivery.com",
            "identifier": "EU.EORI.NLHAPPYPETS",
            "delegation_endpoint": "https://ar.packetdelivery.com/delegation",
            }
            }
            </p>
            <p>Packet Delivery company proxy received the request of step 19 for changing the PTA of a delivery order. The Access Token received from the customer ensures that she was assigned the delegation evidence with a policy for updating the PTA attribute of this specific delivery order (called issuance at user level). Furthermore, since in this scenario the required customer policy was issued by a 3rd party (Happy Pets), the proxy has to check whether Happy Pets itself is allowed to delegate this policy. In general, the rule would be that the proxy needs to check the existence of valid policies through the chain of issuers, until itself (in this case the Packet Delivery company) is the issuer. In this scenario, the proxy will check policies at two different levels: issued at organizational level (from Packet Delivery company to Happy Pets) and issued at user level (from Happy Pets to customer). The Verifiable Credential takes care of the user level policies.
            At first, the Packet Delivery company proxy validates the JWT which is part of the authorization header of the PATCH request.
            </p>
            <p>In order to check whether Happy Pets is allowed to delegate the policy to its customers, the proxy will check at the Packet Delivery company Authorisation Registry whether this policy exists. The proxy sends a request to the /delegation endpoint of the Packet Delivery company Authorization Registry.
            The proxy receives the delegation evidence policy issued from Packet Delivery company to Happy Pets.
            Having received the delegation information from the Packet Delivery company Authorization Registry, the proxy (or more precisely, the PDP) can now evaluate whether the contained organizational policy allows for updating the PTA attribute, and therefore whether Happy Pets is allowed to delegate the access to its customers. If the proxy received a valid policy, access would be granted on an organizational level. 
            If the requested delegation evidence can not be found or the returned policy contains the Deny rule, the change of the PTA would be denied by the Packet Delivery company proxy and an error would be returned to the Packet Delivery company portal/app, also presented to the Happy Pets customer. The following steps would be omitted.
            As described in the previous steps, the PDP evaluated that a change of the PTA of the specific delivery order is granted, both on organizational level and user level. As a result, the request for changing the PTA is forwarded by the Packet Delivery company proxy to the Packet Delivery company Context Broker which holds the information of the packet delivery order. The PTA of the packet delivery order is changed and the Context Broker returns a successful response with HTTP code 204. The Context Broker response is returned to the Packet Delivery company portal, in response to the request of step 26.
            The successful change of the PTA is presented to the Happy Pets customer.
            </p>
        </section>

    </section>

</section>


<section id="references">


</body>
</html>
